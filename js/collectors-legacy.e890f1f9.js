(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["collectors"],{"21c7":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ContentHeader",[t._v(" Collector "),n("template",{slot:"extra"},[n("button",{staticClass:"btn btn-primary ml-2 btn-noborder",on:{click:function(e){t.isAddCollectorShown=!0}}},[t._v(" Add Collector ")])])],2),n("CollectorTable",{on:{fund:t.onFundModalOpen,delete:t.onDeleteCollector,edit:t.onEditCollector}}),n("AddFund",{attrs:{collector:t.targetCollector,visible:t.isFundModalShown},on:{close:function(e){t.isFundModalShown=!1}}}),n("DeleteCollector",{attrs:{visible:t.isDeleteModalShown,collector:t.targetCollector},on:{close:function(e){t.isDeleteModalShown=!1}}}),n("CreateCollector",{attrs:{visible:t.isAddCollectorShown},on:{close:function(e){t.isAddCollectorShown=!1}}}),n("UpdateCollector",{attrs:{"collector-id":t.targetCollector.id,visible:t.isEditCollectorShown},on:{close:function(e){t.isEditCollectorShown=!1}}})],1)},s=[],o=n("1a1f"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("UpdateStatus",{attrs:{visible:t.isStatusModalShown,user:t.targetCollector,status:t.targetCollector.status,submission:t.updateStatus},on:{success:t.setStatus,close:function(e){t.isStatusModalShown=!1}}}),n("CardBase",{staticClass:"p-4 mb-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("InputSelect",{attrs:{title:"Status","option-value":"value","option-text":"name",options:t.statuses},on:{select:function(e){return t.fetchData()}},model:{value:t.dataFilters.status,callback:function(e){t.$set(t.dataFilters,"status",e)},expression:"dataFilters.status"}})],1),n("div",{staticClass:"col-md-3"}),n("div",{staticClass:"col-md-6"},[n("Search",{staticClass:"mt-4 pt-1",attrs:{debounce:500},on:{change:function(e){return t.fetchData()}},model:{value:t.dataFilters.keyword,callback:function(e){t.$set(t.dataFilters,"keyword",e)},expression:"dataFilters.keyword"}})],1)])]),n("CardLoader",{attrs:{"is-loading":t.isLoading}},[n("CardBase",{staticClass:"table-responsive"},[t.collectors.length?n("table",{staticClass:"table table-vcenter m-0"},[n("thead",{staticClass:"bg-gray-lighter"},[n("tr",[n("th",{staticClass:"text-center"},[t._v(" # ")]),n("th",[t._v(" Photo ")]),n("th",{staticClass:"pl-4"},[t._v(" Full Name ")]),n("th",[t._v("Phone")]),n("th",[t._v(" Total Amount "),n("i",{staticClass:"si si-info",attrs:{title:"Total amount since last update"}})]),n("th",[t._v(" Last Online ")]),n("th",{staticClass:"text-center"},[t._v(" Status ")]),n("th",{staticStyle:{width:"130px"}})])]),n("tbody",t._l(t.collectors,(function(e,a){return n("tr",{key:e.index},[n("td",{staticClass:"text-center"},[t._v(" "+t._s(a+1)+" ")]),n("td",[n("ImageColumn",{attrs:{url:e.avatar_url}})],1),n("td",{staticClass:"pl-4 ml-4"},[t._v(" "+t._s(e.fullname||e.first_name+" "+e.last_name)+" ")]),n("td",[t._v(" "+t._s(e.phone)+" ")]),n("td",[t._v(" "+t._s(t._f("formatCurrency")(e.amounts.total_amount))+" ")]),n("td",[n("LastOnlineCol",{attrs:{status:e.last_online}})],1),n("td",{staticClass:"text-center"},[n("StatusColumn",{attrs:{status:e.is_active},on:{change:function(n){return t.onStatusUpdate(e,n)}}})],1),n("td",[n("div",{staticClass:"d-flex flex-row justify-content-around"},[t._e(),n("button",{staticClass:"btn btn-sm btn-success btn-noborder",attrs:{title:"Edit Collector"},on:{click:function(n){return t.$emit("edit",e)}}},[n("i",{staticClass:"si si-note"})])])])])})),0)]):n("div",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[n("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" No Data Found ")])])])],1),n("div",{staticClass:"d-flex justify-content-between align-items-center flex-wrap"},[n("div",[t._v(" "+t._s(t.pagination.message)+" ")]),n("div",{staticClass:"d-flex justify-content-center"},[n("InputSelect",{attrs:{options:[5,15,25,50,100]},on:{select:function(e){return t.fetchData()}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),n("Pagination",{attrs:{length:t.pagination.pages,current:t.pagination.current},on:{change:t.changePagination}})],1)])],1)},r=[],l=(n("d81d"),n("15fd")),c=n("5530"),u=n("2ef0"),d=n("395b"),f=n("ab74"),h=n("020b"),m=n("0af5"),p=n("9c4f"),b=n("31e6"),v=n("0f8e"),g=n("c2cd"),C=n("7e22"),y=n("9a1a"),w=n("66cb"),_={name:"CollectorTable",components:{Search:p["a"],Pagination:v["a"],InputSelect:m["a"],CardBase:h["a"],CardLoader:g["a"],ImageColumn:b["a"],StatusColumn:y["a"],UpdateStatus:w["a"],LastOnlineCol:C["a"]},data:function(){return{collectors:[],isLoading:!1,isStatusModalShown:!1,targetCollector:{},statuses:[{name:"All",value:null},{name:"Active",value:1},{name:"Inactive",value:0}],dataFilters:{status:1,keyword:""},pagination:{pages:1,current:1,perPage:15}}},created:function(){this.$bus.on("reload-collector-table",this.fetchData),this.fetchData()},beforeDestroy:function(){this.$bus.removeAllListeners("reload-collector-table")},mounted:function(){var t=this;this.$bus.on("router-link-clicked",(function(){t.isLoading||t.fetchData()}))},methods:{updateStatus:d["i"],setStatus:function(){var t=this.targetCollector,e=Object(u["findIndex"])(this.collectors,["id",t.id]);this.collectors[e].is_active=t.status?1:0},onStatusUpdate:function(t,e){this.targetCollector=Object(c["a"])(Object(c["a"])({},t),{},{status:e}),this.isStatusModalShown=!0},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.dataFilters,a=n.status,s=n.keyword;this.isLoading=!0,Object(d["d"])({page:e,is_active:a||null,keyword:s||null,per_page:this.pagination.perPage}).then((function(e){var n=e.data,a=e.meta;t.collectors=n.map((function(t){var e=t.phones,n=Object(l["a"])(t,["phones"]);return Object(c["a"])(Object(c["a"])({},n),{},{phone:Object(f["g"])(e)})})),t.pagination=Object(f["f"])(a),t.isLoading=!1})).catch((function(e){"request-cancel"!==e&&(t.$toast.error("There was an error while fetching data."),t.isLoading=!1)}))},changePagination:function(t){this.pagination.current=t,this.fetchData(t)}}},S=_,F=n("2877"),x=Object(F["a"])(S,i,r,!1,null,null,null),P=x.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:"Create Collector",visible:t.visible,"hide-controls":""},on:{close:t.close,closed:t.onClosed}},[n("User",{staticClass:"fade-in",attrs:{loading:t.isLoading},on:{submit:t.createCollector},model:{value:t.collector,callback:function(e){t.collector=e},expression:"collector"}})],1)},j=[],O=(n("99af"),n("47a4")),k=n("78b5"),A={name:"CollectorForm",components:{Modal:k["a"],User:O["a"]},props:{visible:{type:Boolean,default:!1}},data:function(){return{collector:{},isLoading:!1,isUserFormShown:!0}},methods:{createCollector:function(){var t=this;this.isLoading=!0;var e=this.collector,n=e.first_name,a=e.last_name;Object(d["a"])(Object(c["a"])(Object(c["a"])({},e),{},{fullname:"".concat(n," ").concat(a)})).then((function(){t.$bus.emit("reload-collector-table"),t.$toast.success("Collector Successfully Created"),t.isLoading=!1,t.close()})).catch((function(e){t.$toast.error(e,{duration:1e4}),t.isLoading=!1}))},close:function(){this.isLoading||this.$emit("close")},onClosed:function(){this.collector={},this.isUserFormShown=!0}}},D=A,E=(n("9b38"),Object(F["a"])(D,$,j,!1,null,"6e90fd68",null)),T=E.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:"Edit Collector",visible:t.visible,"hide-controls":""},on:{close:t.close,closed:t.onClosed}},[n("CardLoader",{attrs:{"is-loading":t.isFetchingData}},[n("Tabs",{staticClass:"mt-n4",attrs:{current:t.activeTab,tabs:["General","Phone","Security"]},on:{change:t.changeTab}},[n("div",{staticClass:"pt-4"},[t.isTabActive("General")?n("User",{staticClass:"fade-in",attrs:{loading:t.isSubmitting,"edit-mode":""},on:{submit:t.updateCollector},model:{value:t.collector,callback:function(e){t.collector=e},expression:"collector"}}):t.isTabActive("Phone")?n("Phone",{staticClass:"fade-in",attrs:{"user-id":t.collector.user_id},on:{updated:t.reloadTable},model:{value:t.collector.phones,callback:function(e){t.$set(t.collector,"phones",e)},expression:"collector.phones"}}):t.isTabActive("Security")?n("Security",{staticClass:"fade-in",attrs:{user:{id:t.collector.user_id,token:t.collector.token}}}):t._e()],1)])],1)],1)},B=[],M=(n("a9e3"),n("d3b7"),n("fa43")),U=n("71f7"),I=n("6d04"),N=n("a1be"),q={name:"UpdateCollector",components:{Modal:k["a"],Tabs:M["a"],User:O["a"],Phone:U["a"],Security:I["a"],CardLoader:g["a"]},props:{visible:{type:Boolean,default:!1},collectorId:{type:Number,default:1}},data:function(){return{activeTab:"",isFetchingData:!1,isSubmitting:!1,collector:{}}},watch:{visible:function(t){t&&this.fetchData()}},methods:{fetchData:function(){var t=this;this.isFetchingData=!0,Object(d["c"])(this.collectorId).then((function(e){t.collector=Object(N["d"])(e),t.activeTab="General"})).catch((function(){t.close(),t.$toast.error("There was an error while fetching collector data!")})).finally((function(){t.isFetchingData=!1}))},updateCollector:function(){var t=this;this.isSubmitting=!0;var e=this.collector,n=e.first_name,a=e.last_name;Object(d["g"])(this.collectorId,Object(c["a"])(Object(c["a"])({},e),{},{fullname:"".concat(n," ").concat(a)})).then((function(){t.$toast.success("Collector successfully updated"),t.reloadTable()})).catch((function(e){t.$toast.error(e,{duration:1e4})})).finally((function(){t.isSubmitting=!1}))},isTabActive:function(t){return this.activeTab===t},close:function(){this.isSubmitting||this.$emit("close")},onClosed:function(){this.activeTab=""},changeTab:function(t){this.isSubmitting||(this.activeTab=t)},reloadTable:function(){this.$bus.emit("reload-collector-table")}}},z=q,G=Object(F["a"])(z,L,B,!1,null,null,null),H=G.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:"Delete Collector",visible:t.visible,loading:t.isLoading},on:{close:t.onClose,success:t.deleteCollector}},[t._v(" Are you sure you want to delete "+t._s(t.collector.first_name+" "+t.collector.last_name)+"? ")])},R=[],Y={name:"DeleteCollector",components:{Modal:k["a"]},props:{visible:{type:Boolean,default:!1},collector:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1}},methods:{deleteCollector:function(){var t=this;this.isLoading=!0,Object(d["b"])(this.collector.id).then((function(){t.$bus.emit("reload-collector-table"),t.$toast.success("Successfully Deleted!")})).catch((function(e){e?t.$toast.error(e):t.$toast.error("There was an error while deleting collector!")})).finally((function(){t.isLoading=!1,t.onClose()}))},onClose:function(){this.isLoading||this.$emit("close")}}},K=Y,Q=Object(F["a"])(K,J,R,!1,null,null,null),V=Q.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:t.title,loading:t.isSubmittingFund,"hide-controls":"",visible:t.visible},on:{closed:t.reset,close:t.close}},[n("div",{staticClass:"modal-form-wrapper pb-3"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.storeFund(e)}}},[n("ForeShadow",{attrs:{visible:t.isSubmittingFund}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"col-12 input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"form-control",staticStyle:{"font-size":"16px"},attrs:{type:"number",placeholder:"Enter Amount",min:"1",step:"0.1",required:"",autofocus:""},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),n("div",{staticClass:"input-group-append"},[n("Button",{attrs:{type:"submit",loading:t.isSubmittingFund,color:"primary"}},[t._v(" Add ")])],1)])])])])],1),n("div",{staticClass:"col-12 mt-3"},[n("h5",{staticClass:"mb-2 text-gray-dark"},[t._v(" Recent Funds ")]),n("FundTable",{attrs:{funds:t.funds,loading:t.isFetchingFunds,update:t.updateFund}})],1)]),n("p",{staticClass:"mb-0 mt-3 text-gray-dark text-right"},[t._v(" * You cannot edit the approved transaction ")])])},X=[],Z=n("d855"),tt=n("ad4f"),et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CardLoader",{attrs:{"is-loading":t.loading}},[n("SimpleBar",{staticClass:"bg-gray-lighter overflow-auto",staticStyle:{"max-height":"300px"}},[t.funds.length?n("table",{staticClass:"table table-borderless table-vcenter mb-0"},[n("tbody",t._l(t.funds,(function(e){return n("tr",{key:e.id},[n("td",{staticStyle:{width:"50%"}},[t.currentEditing!==e.id?n("span",{staticClass:"pl-2"},[t._v(" "+t._s(t._f("formatCurrency")(e.amount))+" ")]):n("span",[n("form",{on:{submit:function(n){return n.preventDefault(),t.save(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.editAmount,expression:"editAmount"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:"0.1",autofocus:""},domProps:{value:t.editAmount},on:{input:function(e){e.target.composing||(t.editAmount=e.target.value)}}}),n("button",{ref:"editFormButton",refInFor:!0,staticClass:"d-none",attrs:{type:"submit"}})])])]),n("td",{staticClass:"text-center"},[t._v(" "+t._s(e.entry_time)+" ")]),n("td",{staticClass:"text-center"},[t._v(" "+t._s(e.entry_date_np)+" ")]),n("td",{staticStyle:{width:"65px"}},[t.currentEditing!==e.id?n("Button",{attrs:{size:"sm",title:t.isEditable(e)?"Edit Fund":"Cannot Edit",disabled:!t.isEditable(e),color:t.isEditable(e)?"success":"secondary"},on:{click:function(n){return t.edit(e)}}},[n("i",{staticClass:"si si-note"})]):n("Button",{attrs:{loading:t.isUpdating,size:"sm",color:"primary"},on:{click:t.onSave}},[n("i",{staticClass:"fa fa-floppy-o"})])],1)])})),0)]):n("div",{staticClass:"min-height-100 d-flex flex-row justify-content-center align-items-center"},[n("span",{staticClass:"text-gray-dark"},[n("strong",[t._v(" No Recent Funds ")])])])])],1)},nt=[],at=n("8d3b"),st={name:"FundTable",components:{CardLoader:g["a"],SimpleBar:at["a"],Button:tt["a"]},props:{funds:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},update:{type:Function,default:function(){}}},data:function(){return{currentEditing:null,editAmount:0,isUpdating:!1}},methods:{isEditable:function(t){return!t.is_approved},edit:function(t){this.currentEditing=t.id,this.editAmount=t.amount},save:function(t){var e=this;if(t.amount!==this.editAmount)return this.isUpdating=!0,void this.update(t.id,this.editAmount).then((function(){e.currentEditing=null,e.editAmount="",e.isUpdating=!1}));this.currentEditing=null,this.editAmount=""},onSave:function(){var t=this.$refs.editFormButton[0];t.click()}}},ot=st,it=Object(F["a"])(ot,et,nt,!1,null,null,null),rt=it.exports,lt={name:"AddFund",components:{Modal:k["a"],ForeShadow:Z["a"],Button:tt["a"],FundTable:rt},props:{visible:{type:Boolean,default:!0},collector:{type:Object,default:function(){return{}}}},data:function(){return{isFetchingFunds:!1,isFundUpdating:!1,funds:[],isSubmittingFund:!1,amount:null}},computed:{title:function(){return"Add Fund > ".concat(this.collector.first_name," ").concat(this.collector.last_name)}},watch:{visible:function(t){t&&this.fetchFunds()}},methods:{storeFund:function(){var t=this;this.isSubmittingFund=!0,Object(d["f"])(this.collector.id,this.amount).then((function(){t.amount=null,t.fetchFunds(),t.$toast.success("Fund successfully stored.")})).catch((function(e){t.$toast.error(e,{duration:1e4})})).finally((function(){t.isSubmittingFund=!1}))},close:function(){this.isSubmittingFund||this.$emit("close")},fetchFunds:function(){var t=this;this.isFetchingFunds=!0,Object(d["e"])(this.collector.id).then((function(e){t.funds=e.data})).catch((function(){t.$toast.error("There was an error while fetching fund.")})).finally((function(){t.isFetchingFunds=!1}))},updateFund:function(t,e){var n=this;return Object(d["h"])(t,e).then((function(){var a=Object(u["findIndex"])(n.funds,["id",t]);n.funds[a].amount=e,n.$toast.success("Fund updated successfully")})).catch((function(t){n.$toast.error(t,{duration:1e4})}))},reset:function(){this.isFetchingFunds=!1,this.funds=[],this.isSubmittingFund=!1,this.amount=null}}},ct=lt,ut=Object(F["a"])(ct,W,X,!1,null,null,null),dt=ut.exports,ft={name:"Collectors",components:{CreateCollector:T,CollectorTable:P,ContentHeader:o["a"],DeleteCollector:V,UpdateCollector:H,AddFund:dt},data:function(){return{isAddCollectorShown:!1,isDeleteModalShown:!1,isEditCollectorShown:!1,isFundModalShown:!1,targetCollector:{}}},methods:{onDeleteCollector:function(t){this.targetCollector=t,this.isDeleteModalShown=!0},onEditCollector:function(t){this.targetCollector=t,this.isEditCollectorShown=!0},onFundModalOpen:function(t){this.targetCollector=t,this.isFundModalShown=!0}}},ht=ft,mt=Object(F["a"])(ht,a,s,!1,null,null,null);e["default"]=mt.exports},"32f3":function(t,e,n){"use strict";var a=n("72ea"),s=n.n(a);s.a},"66cb":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:"Confirmation",visible:t.visible,loading:t.loading},on:{success:t.onSuccess,close:t.close}},[t._v(" Are you sure you want to "+t._s(t.state)+" "+t._s(t.userName)+"? ")])},s=[],o=(n("99af"),n("d3b7"),n("78b5")),i={name:"UpdateStatus",components:{Modal:o["a"]},props:{visible:{type:Boolean,default:!1},user:{type:Object,default:function(){return{}}},status:{type:Boolean,default:!1},submission:{type:Function,default:function(){}}},data:function(){return{loading:!1}},computed:{state:function(){return this.status?"activate":"deactivate"},userName:function(){return"".concat(this.user.first_name," ").concat(this.user.last_name)}},methods:{onSuccess:function(){var t=this;this.loading=!0,this.submission(this.user.id,this.status).then((function(){t.$toast.success("Status successfully updated"),t.$emit("success"),t.close(!0)})).catch((function(){t.$toast.error("There was an error while changing status")})).finally((function(){t.loading=!1}))},close:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading&&!t||this.$emit("close")}}},r=i,l=n("2877"),c=Object(l["a"])(r,a,s,!1,null,null,null);e["a"]=c.exports},"6d04":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.formSubmit(e)}}},[n("ForeShadow",{attrs:{visible:t.isSubmitting}},[n("SimpleBar",{staticClass:"modal-form-wrapper"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-9"},[n("InputText",{attrs:{title:"New Password",type:"password",error:t.error,required:""},on:{input:function(e){t.error=""}},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),n("div",{staticClass:"col-9"},[n("InputText",{attrs:{title:"Confirm Password",error:t.error,type:"password",required:""},on:{input:function(e){t.error=""}},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1)])])],1),n("div",{staticClass:"py-3 d-flex justify-content-start"},[n("Button",{attrs:{type:"submit",loading:t.isSubmitting,color:"primary"}},[t._v(" Update ")])],1)],1)},s=[],o=(n("d3b7"),n("8d3b")),i=n("2612"),r=n("7fb4"),l=n("ad4f"),c=n("d855"),u={name:"SecurityForm",components:{InputText:r["a"],Button:l["a"],ForeShadow:c["a"],SimpleBar:o["a"]},props:{user:{type:Object,default:function(){return{}}}},data:function(){return{newPassword:"",confirmPassword:"",error:"",isSubmitting:!1}},methods:{formSubmit:function(){var t=this;this.newPassword===this.confirmPassword?(this.isSubmitting=!0,Object(i["h"])({token:this.user.token,new_password:this.newPassword}).then((function(){t.$toast.success("Password successfully updated.")})).catch((function(e){t.$toast.error(e,{duration:1e4})})).finally((function(){t.isSubmitting=!1}))):this.error="Password didn't match"}}},d=u,f=n("2877"),h=Object(f["a"])(d,a,s,!1,null,null,null);e["a"]=h.exports},"71f7":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{on:{submit:function(e){return e.preventDefault(),t.formSubmit(e)}}},[n("ForeShadow",{attrs:{visible:t.loading}},[n("SimpleBar",{staticClass:"modal-form-wrapper"},[n("div",{staticClass:"row"},t._l(t.inputPhones,(function(e,a){return n("div",{key:a,staticClass:"col-12 phone-wrapper"},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"d-flex align-items-center flex-wrap"},[n("div",{staticClass:"flex-grow-1 mr-4"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone.phone"}],staticClass:"form-control flex-grow-1",class:{"is-primary":e.isPrimary,"is-invalid":e.error},attrs:{placeholder:"Phone",type:"text",required:"",pattern:"\\+?(?:[0-9]{3})?(?:\\s|-)?[0-9]{6,10}"},domProps:{value:e.phone},on:{input:[function(n){n.target.composing||t.$set(e,"phone",n.target.value)},function(e){return t.removeError(a)}]}}),e.error?n("span",{staticClass:"text-danger"},[t._v(" "+t._s(e.error)+" ")]):t._e()]),n("div",{staticClass:"d-flex"},[n("a",{staticClass:"enable-underline mr-3 text-nowrap",class:{"disabled-link":e.isPrimary},attrs:{tabindex:"-1",href:"#"},on:{click:function(e){return e.preventDefault(),t.setAsPrimary(a)}}},[t._v("set as primary ")]),n("a",{staticClass:"enable-underline text-danger",class:{"disabled-link":e.isPrimary},attrs:{tabindex:"-1",href:"#"},on:{click:function(e){return e.preventDefault(),t.removePhone(a)}}},[t._v("remove")])])])])])})),0),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("a",{staticClass:"enable-underline",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addNewPhone(e)}}},[t._v(" Add New ")])])])]),n("div",{staticClass:"py-3 d-flex justify-content-start"},[n("Button",{attrs:{type:"submit",loading:t.loading,disabled:t.loading,color:"primary"}},[t._v(" Update ")])],1)],1)],1)])},s=[],o=(n("4de4"),n("d81d"),n("a434"),n("a9e3"),n("d3b7"),n("25f0"),n("8d3b")),i=n("2ef0"),r=n("2612"),l=n("ad4f"),c=n("d855"),u={name:"Phone",components:{Button:l["a"],ForeShadow:c["a"],SimpleBar:o["a"]},props:{userId:{type:Number,default:null},value:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,inputPhones:[]}},watch:{value:{handler:function(t){this.inputPhones=t.map((function(t){return{phone:t.phone,isPrimary:!!t.is_primary,error:""}}))},immediate:!0}},methods:{addNewPhone:function(){this.inputPhones.push({phone:"",isPrimary:!1,error:""})},setAsPrimary:function(t){if(this.inputPhones[t].phone){var e=Object(i["findIndex"])(this.inputPhones,"isPrimary");this.inputPhones[e]&&(this.inputPhones[e].isPrimary=!1),this.inputPhones[t].isPrimary=!0}else this.inputPhones[t].error="Cannot set empty value as primary."},formSubmit:function(){var t=this,e=this.inputPhones.filter((function(t){return!!t.phone})).map((function(t){return{phone:t.phone.toString(),is_primary:t.isPrimary?1:0}}));this.loading=!0,Object(r["l"])(this.userId,{phones:e}).then((function(){t.$emit("input",e),t.$emit("updated",e),t.$toast.success("Phone successfully updated")})).catch((function(e){t.$toast.error(e,{duration:1e4})})).finally((function(){t.loading=!1}))},removePhone:function(t){this.inputPhones.splice(t,1)},removeError:function(t){this.inputPhones[t].error=""}}},d=u,f=(n("32f3"),n("2877")),h=Object(f["a"])(d,a,s,!1,null,"01f75095",null);e["a"]=h.exports},"72ea":function(t,e,n){},"7e22":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{class:{"font-italic text-gray-dark":""===t.status}},[t._v(" "+t._s(t.status||"N/A")+" ")])},s=[],o={name:"LastOnlineColumn",props:{status:{type:String,default:""}}},i=o,r=n("2877"),l=Object(r["a"])(i,a,s,!1,null,null,null);e["a"]=l.exports},"9b38":function(t,e,n){"use strict";var a=n("d8a5"),s=n.n(a);s.a},d8a5:function(t,e,n){},fa43:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block mb-0"},[n("ul",{staticClass:"nav nav-tabs nav-tabs-alt",attrs:{"data-toggle":"tabs",role:"tablist"}},t._l(t.tabs,(function(e,a){return n("li",{key:a,staticClass:"nav-item"},[n("a",{staticClass:"nav-link text-capitalize",class:{active:t.current===e},attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.$emit("change",e)}}},[t._v(t._s(e))])])})),0),n("div",{staticClass:"tab-content"},[t._t("default")],2)])},s=[],o={props:{current:{type:String,default:""},tabs:{type:Array,default:function(){return[]}}}},i=o,r=n("2877"),l=Object(r["a"])(i,a,s,!1,null,null,null);e["a"]=l.exports}}]);