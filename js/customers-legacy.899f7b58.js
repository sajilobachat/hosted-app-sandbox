(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["customers"],{"007b":function(t,e,n){},"06bc":function(t,e,n){"use strict";var a=n("e064"),s=n.n(a);s.a},"163c":function(t,e,n){"use strict";var a=n("48a5"),s=n.n(a);s.a},"16de":function(t,e,n){},"19b1":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2 bg-white custom-border-radius"},[n("p",{staticClass:"m-0 text-center"},[t._v(" "+t._s(t.field.name)+" "),t.field.required?n("span",{staticClass:"text-danger"},[t._v("*")]):t._e()]),n("select",{ref:"input",staticClass:"form-control",staticStyle:{width:"140px"},attrs:{name:"sample"},domProps:{value:t.value},on:{input:t.updateInput}},t._l(t.field.options,(function(e){return n("option",{key:t.getOptionValue(e),domProps:{value:t.getOptionValue(e)}},[t._v(" "+t._s(t.getOptionText(e))+" ")])})),0)])},s=[],i=(n("a9e3"),{name:"Selectable",props:{field:{type:Object,default:function(){return{}}},value:{type:[Number,String],default:0}},methods:{getOptionValue:function(t){var e=this.field.optionValue;return e?t[e]:t},getOptionText:function(t){var e=this.field.optionText;return e?t[e]:t},updateInput:function(){this.$emit("input",this.$refs.input.value),this.$emit("select",this.$refs.input.value)}}}),o=i,r=n("2877"),u=Object(r["a"])(o,a,s,!1,null,"779e8940",null);e["a"]=u.exports},"20ea":function(t,e,n){"use strict";var a=n("8e1b"),s=n.n(a);s.a},"27dc":function(t,e,n){},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n("6b75");function s(t){if(Array.isArray(t))return Object(a["a"])(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=n("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return s(t)||i(t)||Object(o["a"])(t)||r()}},"31e6":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-wrapper bg-gray d-flex justify-content-center align-items-center rounded-circle"},[t.url?n("img",{staticClass:"img-fluid rounded-circle",attrs:{src:t.url}}):n("i",{class:t.icon})])},s=[],i={name:"ImageColumn",props:{url:{type:String,default:""},icon:{type:String,default:"si si-user"}}},o=i,r=(n("cad3"),n("2877")),u=Object(r["a"])(o,a,s,!1,null,"1cbdaccf",null);e["a"]=u.exports},"32f3":function(t,e,n){"use strict";var a=n("72ea"),s=n.n(a);s.a},"40eb":function(t){t.exports=JSON.parse('[{"id":"fullname","name":"Full Name","dataType":"string","required":true,"csvField":{}},{"id":"account_type","name":"Account Type","type":"dropdown","options":[{"id":1,"name":"SAVINGS"},{"id":2,"name":"LOAN"}],"optionValue":"id","optionText":"name","selected":1,"required":true},{"id":"account_number","name":"Account Number","dataType":"string","required":true,"csvField":{}},{"id":"category","name":"Category","dataType":"string","required":false,"csvField":{}},{"id":"email","name":"Email","dataType":"string","required":false,"csvField":{}},{"id":"phone","name":"Phone Number","dataType":"string","required":false,"csvField":{}},{"id":"group","name":"Group","type":"dropdown","optionValue":"id","optionText":"name","options":[],"selected":0,"required":false},{"id":"landmark","name":"Landmark (address)","dataType":"string","required":false,"csvField":{}}]')},"48a5":function(t,e,n){},"564f":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CardLoader",{attrs:{"is-loading":t.isLoading}},[n("div",{style:{height:"200px",width:"400px"}},[n("FileUploader",{attrs:{message:"Drop your csv file here"},on:{upload:t.onFileUpload}})],1)])},s=[],i=(n("d3b7"),n("c2cd")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"file-upload m-auto d-flex justify-content-center",class:{dragging:t.isDragging},on:{dragenter:function(e){t.isDragging=!0},dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),t.onFileDrop(e)},dragleave:function(e){t.isDragging=!1}}},[n("div",{staticClass:"d-flex flex-column justify-content-center align-items-center",class:{"disable-pointer-event":t.isDragging}},[n("i",{staticClass:"si fa-4x si-cloud-download"}),n("span",{staticClass:"mt-2"},[t._v(" "+t._s(t.message)+". Or, ")]),n("button",{staticClass:"btn btn-sm btn-primary btn-noborder mt-2",on:{click:t.openFileExplorer}},[t._v(" Select from your device ")]),n("input",{ref:"inputFile",staticClass:"d-none",attrs:{type:"file"},on:{change:t.onFileSelect}})])])},r=[],u=n("b85c"),l={name:"FileUploader",props:{message:{type:String,default:"Drop your files here"}},data:function(){return{isDragging:!1}},methods:{getFiles:function(t){var e=[];if(t.items.length){var n,a=Object(u["a"])(t.items);try{for(a.s();!(n=a.n()).done;){var s=n.value,i=s.getAsFile();e.push(i)}}catch(c){a.e(c)}finally{a.f()}}else if(t.files.length){var o,r=Object(u["a"])(t.files);try{for(r.s();!(o=r.n()).done;){var l=o.value;e.push(l)}}catch(c){r.e(c)}finally{r.f()}}return e},openFileExplorer:function(){this.$refs.inputFile.click()},onUpload:function(t){this.$emit("upload",t)},onFileDrop:function(t){this.isDragging=!1;var e=this.getFiles(t.dataTransfer);e.length&&this.onUpload(e)},onFileSelect:function(t){var e=t.target;this.isDragging=!1;var n=e.files;n.length&&this.onUpload(n)}}},c=l,d=(n("163c"),n("2877")),p=Object(d["a"])(c,o,r,!1,null,"0d6b6d40",null),m=p.exports,f=n("ab74"),h={name:"CSVUploader",components:{FileUploader:m,CardLoader:i["a"]},data:function(){return{isLoading:!1}},methods:{onFileUpload:function(t){var e=this;this.isLoading=!0;var n=t[0];Object(f["k"])(n)?Object(f["b"])(n).then(f["c"]).then(Object(f["a"])(500)).then((function(t){return e.$emit("load",t)})).finally((function(){e.isLoading=!1})):(this.isLoading=!1,this.$toast.error("Invalid file type"))}}},v=h,b=Object(d["a"])(v,a,s,!1,null,null,null);e["a"]=b.exports},"5a93":function(t,e,n){},"66cb":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:"Confirmation",visible:t.visible,loading:t.loading},on:{success:t.onSuccess,close:t.close}},[t._v(" Are you sure you want to "+t._s(t.state)+" "+t._s(t.userName)+"? ")])},s=[],i=(n("99af"),n("d3b7"),n("78b5")),o={name:"UpdateStatus",components:{Modal:i["a"]},props:{visible:{type:Boolean,default:!1},user:{type:Object,default:function(){return{}}},status:{type:Boolean,default:!1},submission:{type:Function,default:function(){}}},data:function(){return{loading:!1}},computed:{state:function(){return this.status?"activate":"deactivate"},userName:function(){return"".concat(this.user.first_name," ").concat(this.user.last_name)}},methods:{onSuccess:function(){var t=this;this.loading=!0,this.submission(this.user.id,this.status).then((function(){t.$toast.success("Status successfully updated"),t.$emit("success"),t.close(!0)})).catch((function(){t.$toast.error("There was an error while changing status")})).finally((function(){t.loading=!1}))},close:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading&&!t||this.$emit("close")}}},r=o,u=n("2877"),l=Object(u["a"])(r,a,s,!1,null,null,null);e["a"]=l.exports},"6bad":function(t,e,n){},"6d04":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.formSubmit(e)}}},[n("ForeShadow",{attrs:{visible:t.isSubmitting}},[n("SimpleBar",{staticClass:"modal-form-wrapper"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-9"},[n("InputText",{attrs:{title:"New Password",type:"password",error:t.error,required:""},on:{input:function(e){t.error=""}},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),n("div",{staticClass:"col-9"},[n("InputText",{attrs:{title:"Confirm Password",error:t.error,type:"password",required:""},on:{input:function(e){t.error=""}},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1)])])],1),n("div",{staticClass:"py-3 d-flex justify-content-start"},[n("Button",{attrs:{type:"submit",loading:t.isSubmitting,color:"primary"}},[t._v(" Update ")])],1)],1)},s=[],i=(n("d3b7"),n("8d3b")),o=n("2612"),r=n("7fb4"),u=n("ad4f"),l=n("d855"),c={name:"SecurityForm",components:{InputText:r["a"],Button:u["a"],ForeShadow:l["a"],SimpleBar:i["a"]},props:{user:{type:Object,default:function(){return{}}}},data:function(){return{newPassword:"",confirmPassword:"",error:"",isSubmitting:!1}},methods:{formSubmit:function(){var t=this;this.newPassword===this.confirmPassword?(this.isSubmitting=!0,Object(o["h"])({token:this.user.token,new_password:this.newPassword}).then((function(){t.$toast.success("Password successfully updated.")})).catch((function(e){t.$toast.error(e,{duration:1e4})})).finally((function(){t.isSubmitting=!1}))):this.error="Password didn't match"}}},d=c,p=n("2877"),m=Object(p["a"])(d,a,s,!1,null,null,null);e["a"]=m.exports},"6fa3":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2 bg-white custom-border-radius",attrs:{draggable:"true"},on:{dragstart:t.onDragStart}},[n("p",{staticClass:"m-0 text-center"},[t._v(" "+t._s(t.field.name)+" ")])])},s=[],i=n("ab74"),o={name:"Draggable",props:{field:{type:Object,default:null}},methods:{onDragStart:function(t){var e=t.dataTransfer;e.setData("text",Object(i["j"])(this.field))}}},r=o,u=n("2877"),l=Object(u["a"])(r,a,s,!1,null,null,null);e["a"]=l.exports},"71f7":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{on:{submit:function(e){return e.preventDefault(),t.formSubmit(e)}}},[n("ForeShadow",{attrs:{visible:t.loading}},[n("SimpleBar",{staticClass:"modal-form-wrapper"},[n("div",{staticClass:"row"},t._l(t.inputPhones,(function(e,a){return n("div",{key:a,staticClass:"col-12 phone-wrapper"},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"d-flex align-items-center flex-wrap"},[n("div",{staticClass:"flex-grow-1 mr-4"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone.phone"}],staticClass:"form-control flex-grow-1",class:{"is-primary":e.isPrimary,"is-invalid":e.error},attrs:{placeholder:"Phone",type:"text",required:"",pattern:"\\+?(?:[0-9]{3})?(?:\\s|-)?[0-9]{6,10}"},domProps:{value:e.phone},on:{input:[function(n){n.target.composing||t.$set(e,"phone",n.target.value)},function(e){return t.removeError(a)}]}}),e.error?n("span",{staticClass:"text-danger"},[t._v(" "+t._s(e.error)+" ")]):t._e()]),n("div",{staticClass:"d-flex"},[n("a",{staticClass:"enable-underline mr-3 text-nowrap",class:{"disabled-link":e.isPrimary},attrs:{tabindex:"-1",href:"#"},on:{click:function(e){return e.preventDefault(),t.setAsPrimary(a)}}},[t._v("set as primary ")]),n("a",{staticClass:"enable-underline text-danger",class:{"disabled-link":e.isPrimary},attrs:{tabindex:"-1",href:"#"},on:{click:function(e){return e.preventDefault(),t.removePhone(a)}}},[t._v("remove")])])])])])})),0),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("a",{staticClass:"enable-underline",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addNewPhone(e)}}},[t._v(" Add New ")])])])]),n("div",{staticClass:"py-3 d-flex justify-content-start"},[n("Button",{attrs:{type:"submit",loading:t.loading,disabled:t.loading,color:"primary"}},[t._v(" Update ")])],1)],1)],1)])},s=[],i=(n("4de4"),n("d81d"),n("a434"),n("a9e3"),n("d3b7"),n("25f0"),n("8d3b")),o=n("2ef0"),r=n("2612"),u=n("ad4f"),l=n("d855"),c={name:"Phone",components:{Button:u["a"],ForeShadow:l["a"],SimpleBar:i["a"]},props:{userId:{type:Number,default:null},value:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,inputPhones:[]}},watch:{value:{handler:function(t){this.inputPhones=t.map((function(t){return{phone:t.phone,isPrimary:!!t.is_primary,error:""}}))},immediate:!0}},methods:{addNewPhone:function(){this.inputPhones.push({phone:"",isPrimary:!1,error:""})},setAsPrimary:function(t){if(this.inputPhones[t].phone){var e=Object(o["findIndex"])(this.inputPhones,"isPrimary");this.inputPhones[e]&&(this.inputPhones[e].isPrimary=!1),this.inputPhones[t].isPrimary=!0}else this.inputPhones[t].error="Cannot set empty value as primary."},formSubmit:function(){var t=this,e=this.inputPhones.filter((function(t){return!!t.phone})).map((function(t){return{phone:t.phone.toString(),is_primary:t.isPrimary?1:0}}));this.loading=!0,Object(r["l"])(this.userId,{phones:e}).then((function(){t.$emit("input",e),t.$emit("updated",e),t.$toast.success("Phone successfully updated")})).catch((function(e){t.$toast.error(e,{duration:1e4})})).finally((function(){t.loading=!1}))},removePhone:function(t){this.inputPhones.splice(t,1)},removeError:function(t){this.inputPhones[t].error=""}}},d=c,p=(n("32f3"),n("2877")),m=Object(p["a"])(d,a,s,!1,null,"01f75095",null);e["a"]=m.exports},"72ea":function(t,e,n){},"73dd":function(t,e,n){"use strict";var a=n("5a93"),s=n.n(a);s.a},"8b9c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column"},[n("div",{staticClass:"mt-n3 mb-2 text-right"},[n("span",[t._v("1-"+t._s(t.rows.length)+" shown")])]),n("div",{staticClass:"table-responsive conf-table-wrapper overflow-auto"},[n("table",{staticClass:"table table-vcenter m-0"},[n("thead",{staticClass:"bg-gray-lighter"},[n("tr",t._l(t.fields,(function(e){return n("th",{key:e.id,staticClass:"text-nowrap"},[t._v(" "+t._s(e.name)+" ")])})),0)]),n("tbody",t._l(t.rows,(function(e,a){return n("tr",{key:a},t._l(t.fields,(function(a){return n("td",{key:a.id},["dropdown"===a.type?n("span",[t._v(" "+t._s(t.getDropdownFieldValue(a))+" ")]):n("span",[t._v(" "+t._s(e[a.csvField.name]||"N/A")+" ")])])})),0)})),0)])]),n("div",{staticClass:"p-3 d-flex justify-content-end mb-n3"},[n("Button",{attrs:{loading:t.loading,color:"primary"},on:{click:function(e){return t.$emit("confirm")}}},[t._v(" Import ")]),n("button",{staticClass:"btn btn-danger ml-3 btn-noborder",on:{click:function(e){return t.$emit("cancel")}}},[t._v(" Cancel ")])],1)])},s=[],i=(n("b0c0"),n("2ef0")),o=n("ad4f"),r={name:"DataConfResult",components:{Button:o["a"]},props:{csvData:{type:Object,default:null},fields:{type:Array,default:null},loading:{type:Boolean,default:!1}},computed:{rows:function(){return Object(i["slice"])(this.csvData.rows,0,15)}},methods:{getDropdownFieldValue:function(t){var e=Object(i["find"])(t.options,["id",parseInt(t.selected,0)]);return e?e.name:""}}},u=r,l=(n("ebce"),n("2877")),c=Object(l["a"])(u,a,s,!1,null,"6cb84d52",null);e["a"]=c.exports},"8e1b":function(t,e,n){},"9a1a":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{class:t.spanClass,attrs:{title:t.textStatus}},[n("Toggle",{attrs:{color:"success"},on:{change:t.onChange},model:{value:t.inputStatus,callback:function(e){t.inputStatus=e},expression:"inputStatus"}})],1)},s=[],i=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"css-control css-control-sm css-switch",class:t.spanClass},[n("input",{ref:"input",staticClass:"css-control-input",attrs:{type:"checkbox"},domProps:{checked:t.value},on:{input:t.onInput}}),n("span",{staticClass:"css-control-indicator"}),t._v(" "+t._s(t.title)+" ")])}),o=[],r={name:"Toggle",props:{title:{type:String,default:""},value:{type:Boolean,default:!0},color:{type:String,default:"primary"}},computed:{spanClass:function(){return this.color?"css-control-".concat(this.color):""}},methods:{onInput:function(){var t=this.$refs.input.checked;this.$emit("input",t),this.$emit("change",t)}}},u=r,l=n("2877"),c=Object(l["a"])(u,i,o,!1,null,null,null),d=c.exports,p={name:"StatusColumn",components:{Toggle:d},props:{status:{type:Number,default:0}},data:function(){return{inputStatus:!1}},computed:{spanClass:function(){return this.status?"text-success":"text-danger"},textStatus:function(){return this.status?"active":"inactive"}},watch:{status:{handler:function(){this.inputStatus=!!this.status},immediate:!0}},methods:{onChange:function(t){var e=this;setTimeout((function(){e.inputStatus=!t,e.$emit("change",t)}))}}},m=p,f=Object(l["a"])(m,a,s,!1,null,null,null);e["a"]=f.exports},"9d4f":function(t,e,n){"use strict";var a=n("007b"),s=n.n(a);s.a},a292:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("InputBase",{attrs:{title:"Username",error:t.error,required:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.id,s=e.isInvalid;return[n("input",{ref:"input",staticClass:"form-control",class:{"is-invalid":s},attrs:{id:a,type:"text",autocomplete:"off",pattern:t.inputPattern,required:""},domProps:{value:t.value},on:{input:t.onInput}}),t.isLoading?n("div",{staticClass:"inp-icon",staticStyle:{width:"18px"}},[n("Loader")],1):t.isValid?n("div",{staticClass:"text-success inp-icon"},[n("i",{staticClass:"fa fa-check"})]):t._e()]}}])})},s=[],i=(n("d3b7"),n("2ef0")),o=n("2612"),r=n("850b"),u=n("9333"),l={name:"InputUsername",components:{InputBase:r["a"],Loader:u["a"]},props:{value:{type:String,default:""}},data:function(){return{isLoading:!1,isValid:!1,error:""}},computed:{inputPattern:function(){return this.error?"$^":".*"}},created:function(){this.checkAvailability=Object(i["debounce"])(this.checkAvailability,500)},methods:{onInput:function(){this.isLoading=!0;var t=this.$refs.input.value;this.$emit("input",t),this.checkAvailability(t)},updateError:function(t){this.error=t},checkAvailability:function(t){var e=this;if(this.isValid=!1,t.length<5)return this.updateError("The username must be at least 5 characters"),void(this.isLoading=!1);Object(o["b"])(t).then((function(n){if(n)return e.updateError(""),void(e.isValid=!0);e.updateError("".concat(t," is already taken"))})).catch((function(t){"request-cancel"!==t&&(e.error=t)})).finally((function(){e.isLoading=!1}))}}},c=l,d=(n("e97d"),n("2877")),p=Object(d["a"])(c,a,s,!1,null,null,null);e["a"]=p.exports},aedf:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ContentHeader",[t._v(" Customers "),n("template",{slot:"extra"},[n("button",{staticClass:"btn btn-primary ml-2 btn-noborder",on:{click:function(e){t.isAddCustomerShown=!0}}},[t._v(" Add Customer ")])])],2),n("CustomerTable",{attrs:{"use-customer-app":t.useCustomerApp},on:{delete:t.onDeleteCustomer,edit:t.onEditCustomer}}),n("AddCustomer",{attrs:{visible:t.isAddCustomerShown,"use-customer-app":t.useCustomerApp},on:{close:function(e){t.isAddCustomerShown=!1}}}),n("DeleteCustomer",{attrs:{customer:t.targetCustomer,visible:t.isDeleteCustomerShown},on:{close:function(e){t.isDeleteCustomerShown=!1}}}),n("UpdateCustomer",{attrs:{"customer-id":t.targetCustomer.id,visible:t.isEditCustomerShown,"use-customer-app":t.useCustomerApp},on:{close:function(e){t.isEditCustomerShown=!1}}})],1)},s=[],i=n("5530"),o=n("2f62"),r=n("1a1f"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-4"},[n("UpdateStatus",{attrs:{visible:t.isStatusModalShown,user:t.targetCustomer,status:t.targetCustomer.status,submission:t.updateStatus},on:{success:t.setStatus,close:function(e){t.isStatusModalShown=!1}}}),n("CardBase",{staticClass:"p-4 mb-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4"},[n("InputSelect",{attrs:{title:"Account Type",options:["ALL","SAVINGS","LOAN"]},on:{select:function(e){return t.fetchData()}},model:{value:t.dataFilters.account_type,callback:function(e){t.$set(t.dataFilters,"account_type",e)},expression:"dataFilters.account_type"}})],1),n("div",{staticClass:"col-md-4"},[n("InputSelect",{attrs:{title:"Group","option-value":"id","option-text":"name",options:t.groupFilters},on:{select:function(e){return t.fetchData()}},model:{value:t.dataFilters.group_id,callback:function(e){t.$set(t.dataFilters,"group_id",e)},expression:"dataFilters.group_id"}})],1),n("div",{staticClass:"col-md-4"},[n("InputSelect",{attrs:{title:"Status","option-value":"value","option-text":"name",options:t.statuses},on:{select:function(e){return t.fetchData()}},model:{value:t.dataFilters.status,callback:function(e){t.$set(t.dataFilters,"status",e)},expression:"dataFilters.status"}})],1),n("div",{staticClass:"col-md-12"},[n("Search",{staticClass:"pt-1",attrs:{debounce:500},on:{change:function(e){return t.fetchData()}},model:{value:t.dataFilters.keyword,callback:function(e){t.$set(t.dataFilters,"keyword",e)},expression:"dataFilters.keyword"}})],1)])]),n("CardLoader",{attrs:{"is-loading":t.isLoading}},[n("CardBase",{staticClass:"table-responsive"},[t.customers.length?n("table",{staticClass:"table table-vcenter m-0"},[n("thead",{staticClass:"bg-gray-lighter"},[n("tr",[n("th",{staticClass:"text-center"},[t._v(" # ")]),n("th"),n("th",{staticClass:"max-width:30%"},[t._v(" Full Name ")]),n("th",[t._v("A/C Number")]),n("th",[t._v("A/C Type")]),n("th",[t._v("Category")]),t.useCustomerApp?n("th",[t._v(" Balance ")]):t._e(),n("th",{staticStyle:{"max-width":"20%"}},[t._v(" Group ")]),n("th",{staticClass:"text-center"},[t._v(" Status ")]),n("th",{staticStyle:{width:"100px"}})])]),n("tbody",t._l(t.customers,(function(e,a){return n("tr",{key:e.id},[n("td",{staticClass:"text-center"},[t._v(" "+t._s(a+1)+" ")]),n("td",[n("ImageColumn",{attrs:{url:e.avatar_url}})],1),n("td",{staticClass:"pl-4 ml-4"},[t._v(" "+t._s(e.fullname||e.first_name+" "+e.last_name)+" ")]),n("td",[t._v(t._s(e.account_number))]),n("td",[t._v(t._s(e.account_type))]),n("td",[t._v(t._s(e.category||"—"))]),t.useCustomerApp?n("td",{staticClass:"text-success"},[t._v(" "+t._s(t._f("formatCurrency")(e.amounts.total_amount))+" ")]):t._e(),n("td",[t._v(t._s(e.group_name||"N/A"))]),n("td",{staticClass:"text-center"},[n("StatusColumn",{attrs:{status:e.is_active},on:{change:function(n){return t.onStatusUpdate(e,n)}}})],1),n("td",[n("div",{staticClass:"d-flex flex-row justify-content-around"},[n("button",{staticClass:"btn btn-sm btn-success btn-noborder",attrs:{title:"edit"},on:{click:function(n){return t.$emit("edit",e)}}},[n("i",{staticClass:"si si-note"})])])])])})),0)]):n("div",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[n("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" No Data Found ")])])])],1),n("div",{staticClass:"d-flex justify-content-between align-items-center flex-wrap"},[n("div",[t._v(" "+t._s(t.pagination.message)+" ")]),n("div",{staticClass:"d-flex"},[n("InputSelect",{attrs:{options:[5,15,25,50,100]},on:{select:function(e){return t.fetchData()}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),n("Pagination",{attrs:{length:t.pagination.pages,current:t.pagination.current},on:{change:t.changePagination}})],1)])],1)},l=[],c=(n("99af"),n("2909")),d=n("2ef0"),p=n("9671"),m=n("ab74"),f=n("020b"),h=n("0af5"),v=n("0f8e"),b=n("9c4f"),g=n("9a1a"),C=n("c2cd"),y=n("31e6"),_=n("66cb"),x={name:"CustomerTable",components:{Search:b["a"],Pagination:v["a"],CardBase:f["a"],CardLoader:C["a"],ImageColumn:y["a"],InputSelect:h["a"],StatusColumn:g["a"],UpdateStatus:_["a"]},props:{useCustomerApp:{type:Boolean,default:!1}},data:function(){return{customers:[],isLoading:!1,isStatusModalShown:!1,targetCustomer:{},statuses:[{name:"ALL",value:null},{name:"ACTIVE",value:1},{name:"INACTIVE",value:0}],dataFilters:{account_type:"ALL",status:1,group_id:0,keyword:""},pagination:{pages:1,current:1,perPage:15}}},computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])(["groups"])),{},{groupFilters:function(){return[{id:0,name:"ALL"}].concat(Object(c["a"])(this.groups))}}),mounted:function(){var t=this;this.$bus.on("reload-customer-table",this.fetchData),this.fetchGroups({}),this.fetchData(),this.$bus.on("router-link-clicked",(function(){t.isLoading||t.fetchData()}))},beforeDestroy:function(){this.$bus.removeAllListeners("reload-customer-table")},methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])(["fetchGroups"])),{},{updateStatus:p["h"],setStatus:function(){var t=this.targetCustomer,e=Object(d["findIndex"])(this.customers,["id",t.id]);this.customers[e].is_active=t.status?1:0},onStatusUpdate:function(t,e){this.targetCustomer=Object(i["a"])(Object(i["a"])({},t),{},{status:e}),this.isStatusModalShown=!0},fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.dataFilters,a=n.status,s=n.account_type,i=n.keyword,o=n.group_id;this.isLoading=!0;var r=function(t){return t&&"ALL"!==t.toUpperCase()?t:null};Object(p["e"])({is_active:a||null,group_id:JSON.parse(o)||null,account_type:r(s),keyword:i||null,per_page:this.pagination.perPage,page:e}).then((function(e){var n=e.data,a=e.meta;t.customers=n,t.pagination=Object(m["f"])(a),t.isLoading=!1})).catch((function(e){"request-cancel"!==e&&(t.$toast.error("There was an error while fetching data."),t.isLoading=!1)}))},changePagination:function(t){this.pagination.current=t,this.fetchData(t)}})},w=x,S=n("2877"),I=Object(S["a"])(w,u,l,!1,null,null,null),j=I.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{visible:t.visible,title:t.title,"hide-controls":""},on:{closed:t.resetState,close:t.onClose}},[n("div",{staticClass:"add-customer-wrapper"},[t.isLayoutActive("INITIAL")?n("div",{staticClass:"d-flex justify-content-center add-option-wrapper pb-3"},[n("button",{staticClass:"btn mr-2 d-flex flex-column align-items-center justify-content-center",on:{click:function(e){return t.setLayout("CUSTOMER-FORM")}}},[n("i",{staticClass:"si fa-4x si-user-follow"}),n("span",{staticClass:"mt-3"},[t._v("Create")])]),n("button",{staticClass:"btn ml-2 d-flex flex-column align-items-center justify-content-center",on:{click:function(e){return t.setLayout("CUSTOMER-IMPORTER")}}},[n("i",{staticClass:"si fa-4x si-docs"}),n("span",{staticClass:"mt-3"},[t._v("Import")])])]):t._e(),t.isLayoutActive("CUSTOMER-FORM")?n("CreateCustomerForm",{attrs:{"use-customer-app":t.useCustomerApp}}):t._e(),t.isLayoutActive("CUSTOMER-IMPORTER")?n("ImportCustomers"):t._e()],1)])},F=[],$=n("78b5"),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Basic",{staticClass:"fade-in",attrs:{loading:t.isLoading,"use-customer-app":t.useCustomerApp},on:{submit:t.createCustomer},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1)},k=[],A=(n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.onFormSubmit(e)}}},[n("ForeShadow",{attrs:{visible:t.loading}},[n("SimpleBar",{staticClass:"modal-form-wrapper"},[t.editMode?n("EditForm",{attrs:{"use-customer-app":t.useCustomerApp},on:{"uploading-image":t.toggleButtonDisable},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}):n("CreateForm",{attrs:{"use-customer-app":t.useCustomerApp},on:{"uploading-image":t.toggleButtonDisable},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)],1),n("div",{staticClass:"py-3 d-flex justify-content-start"},[n("Button",{attrs:{type:"submit",loading:t.loading,disabled:t.loading||t.disableButton,color:"primary"}},[t._v(" "+t._s(t.editMode?"Update":"Create")+" ")])],1)],1)}),T=[],P=n("8d3b"),E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6 d-flex justify-content-center"},[n("div",{staticClass:"h-100 my-3",staticStyle:{width:"280px","max-height":"300px","min-height":"300px"}},[n("ImageUpload",{attrs:{url:t.input.avatar_url,loading:t.isUploadingImage},on:{upload:t.onImageUpload,remove:t.removeImage}})],1)]),n("div",{staticClass:"col-md-6 order-md-first"},[n("InputText",{attrs:{title:"Full Name",required:""},on:{input:t.onInput},model:{value:t.input.fullname,callback:function(e){t.$set(t.input,"fullname",e)},expression:"input.fullname"}}),n("InputSelect",{attrs:{title:"Account Type",options:["SAVINGS","LOAN"],required:""},on:{input:t.onInput},model:{value:t.input.account_type,callback:function(e){t.$set(t.input,"account_type",e)},expression:"input.account_type"}}),n("InputText",{attrs:{title:"Account Number",required:""},on:{input:t.onInput},model:{value:t.input.account_number,callback:function(e){t.$set(t.input,"account_number",e)},expression:"input.account_number"}}),n("InputText",{attrs:{title:"Category"},on:{input:t.onInput},model:{value:t.input.category,callback:function(e){t.$set(t.input,"category",e)},expression:"input.category"}})],1),n("div",{staticClass:"col-md-6"},[n("InputText",{attrs:{type:"email",title:"Email"},on:{input:t.onInput},model:{value:t.input.email,callback:function(e){t.$set(t.input,"email",e)},expression:"input.email"}})],1),n("div",{staticClass:"col-md-6"},[n("InputText",{attrs:{title:"Phone"},on:{input:t.onInput},model:{value:t.input.phone,callback:function(e){t.$set(t.input,"phone",e)},expression:"input.phone"}})],1),t.useCustomerApp?n("div",{staticClass:"col-md-6"},[n("InputUsername",{model:{value:t.input.username,callback:function(e){t.$set(t.input,"username",e)},expression:"input.username"}})],1):t._e(),t.useCustomerApp?n("div",{staticClass:"col-md-6"},[n("InputText",{attrs:{title:"Password",type:"password",required:""},on:{input:t.onInput},model:{value:t.input.password,callback:function(e){t.$set(t.input,"password",e)},expression:"input.password"}})],1):t._e(),n("div",{staticClass:"col-md-6"},[n("InputText",{attrs:{title:"Landmark"},on:{input:t.onInput},model:{value:t.input.landmark,callback:function(e){t.$set(t.input,"landmark",e)},expression:"input.landmark"}})],1),n("div",{staticClass:"col-md-6"},[n("InputSelect",{attrs:{title:"Group","option-value":"id","option-text":"name",options:t.groupList},on:{input:t.onInput},model:{value:t.input.group_id,callback:function(e){t.$set(t.input,"group_id",e)},expression:"input.group_id"}})],1)])])])},L=[],U=n("2612"),B=n("7fb4"),N=n("a292"),q=n("f67a"),R={name:"CreateForm",components:{InputText:B["a"],InputSelect:h["a"],InputUsername:N["a"],ImageUpload:q["a"]},props:{value:{type:Object,default:function(){return{}}},useCustomerApp:{type:Boolean,default:!1}},data:function(){return{isUploadingImage:!1,input:{group_id:0,account_type:"SAVINGS"}}},computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])(["groups"])),{},{groupList:function(){return[{id:0,name:"None"}].concat(Object(c["a"])(this.groups))}}),watch:{value:{handler:function(t){this.input=Object(i["a"])({avatar_url:"",account_type:"SAVINGS"},t)},immediate:!0}},methods:{onInput:function(){this.$emit("input",this.input)},onImageUpload:function(t){var e=this;this.isUploadingImage=!0,this.$emit("uploading-image",!0);var n=new FormData;n.append("file",t),Object(U["p"])(n).then((function(t){var n=t.filename,a=t.url;e.input.avatar=n,e.input.avatar_url=a,e.onInput()})).catch((function(){e.$toast.error("There was an error whilst uploading image.")})).finally((function(){setTimeout((function(){e.isUploadingImage=!1,e.$emit("uploading-image",!1)}),100)}))},removeImage:function(){this.input.avatar_url="",this.input.avatar=null,this.onInput()}}},M=R,V=Object(S["a"])(M,E,L,!1,null,null,null),G=V.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6 col-12 d-flex justify-content-center"},[n("div",{staticClass:"h-100 my-3",staticStyle:{width:"280px","min-height":"300px","max-height":"300px"}},[n("ImageUpload",{attrs:{url:t.input.avatar_url,loading:t.isUploadingImage},on:{upload:t.onImageUpload,remove:t.removeImage}})],1)]),n("div",{staticClass:"col-md-6 order-md-first"},[n("InputText",{attrs:{title:"Name",required:""},on:{input:t.onInput},model:{value:t.input.fullname,callback:function(e){t.$set(t.input,"fullname",e)},expression:"input.fullname"}}),n("InputText",{attrs:{title:"Account Number",required:""},on:{input:t.onInput},model:{value:t.input.account_number,callback:function(e){t.$set(t.input,"account_number",e)},expression:"input.account_number"}}),n("InputText",{attrs:{title:"Category"},on:{input:t.onInput},model:{value:t.input.category,callback:function(e){t.$set(t.input,"category",e)},expression:"input.category"}}),t.useCustomerApp?n("InputUsername",{model:{value:t.input.username,callback:function(e){t.$set(t.input,"username",e)},expression:"input.username"}}):t._e(),n("InputText",{attrs:{type:"email",title:"Email"},on:{input:t.onInput},model:{value:t.input.email,callback:function(e){t.$set(t.input,"email",e)},expression:"input.email"}})],1),n("div",{staticClass:"col-md-6"},[n("InputText",{attrs:{title:"Landmark"},on:{input:t.onInput},model:{value:t.input.landmark,callback:function(e){t.$set(t.input,"landmark",e)},expression:"input.landmark"}})],1),n("div",{staticClass:"col-md-6"},[n("InputSelect",{attrs:{title:"Group","option-value":"id","option-text":"name",options:t.groupList},on:{input:t.onInput},model:{value:t.input.group_id,callback:function(e){t.$set(t.input,"group_id",e)},expression:"input.group_id"}})],1)])]),n("div",{staticClass:"col-12 order-md-last"},[n("InputTextArea",{attrs:{title:"Description",rows:2},on:{input:t.onInput},model:{value:t.input.description,callback:function(e){t.$set(t.input,"description",e)},expression:"input.description"}})],1)])},J=[],H=n("c6b1"),K={name:"EditForm",components:{InputTextArea:H["a"],InputText:B["a"],InputSelect:h["a"],ImageUpload:q["a"],InputUsername:N["a"]},props:{value:{type:Object,default:function(){return{}}},useCustomerApp:{type:Boolean,default:!1}},data:function(){return{imgUrl:"",isUploadingImage:!1,input:{group_id:0}}},computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])(["groups"])),{},{groupList:function(){return[{id:0,name:"None"}].concat(Object(c["a"])(this.groups))}}),watch:{value:{handler:function(t){this.input=t},immediate:!0}},methods:{onInput:function(){this.$emit("input",this.input)},onImageUpload:function(t){var e=this;this.isUploadingImage=!0,this.$emit("uploading-image",!0);var n=new FormData;n.append("file",t),Object(U["p"])(n).then((function(t){var n=t.filename,a=t.url;e.input.avatar=n,e.input.avatar_url=a,e.onInput(),e.imgUrl=a})).catch((function(){e.$toast.error("There was an error whilst uploading image.")})).finally((function(){e.isUploadingImage=!1,e.$emit("uploading-image",!1)}))},removeImage:function(){this.input.avatar_url="",this.input.avatar=null,this.onInput()}}},Q=K,W=Object(S["a"])(Q,z,J,!1,null,null,null),X=W.exports,Y=n("ad4f"),Z=n("d855"),tt={name:"Basic",components:{Button:Y["a"],CreateForm:G,EditForm:X,ForeShadow:Z["a"],SimpleBar:P["a"]},props:{value:{type:Object,default:function(){}},loading:{type:Boolean,default:!1},editMode:{type:Boolean,default:!1},useCustomerApp:{type:Boolean,default:!1}},data:function(){return{input:{},disableButton:!1}},watch:{value:{handler:function(t){this.input=Object(i["a"])({},t)},immediate:!0}},methods:{onFormSubmit:function(){this.$emit("input",this.input),this.$emit("submit",this.input)},toggleButtonDisable:function(t){this.disableButton=t}}},et=tt,nt=Object(S["a"])(et,A,T,!1,null,null,null),at=nt.exports,st={name:"CreateCustomerForm",components:{Basic:at},props:{useCustomerApp:{type:Boolean,default:!1}},data:function(){return{isLoading:!1,customer:{group_id:0}}},methods:{createCustomer:function(){var t=this;this.isLoading=!0,Object(p["b"])(Object(i["a"])(Object(i["a"])({},this.customer),{},{group_id:parseInt(this.customer.group_id,0)||null})).then((function(){t.$bus.emit("reload-customer-table"),t.$bus.emit("customer-modal-close"),t.$toast.success("Customer Successfully Created!")})).catch((function(e){t.$toast.error(e,{duration:1e4})})).finally((function(){t.isLoading=!1}))}}},it=st,ot=Object(S["a"])(it,D,k,!1,null,null,null),rt=ot.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pb-3"},[t.csvData?n("DataConfigure",{attrs:{loading:t.isSubmitting,"csv-data":t.csvData},on:{"data-configure":t.submitData}}):n("CSVUploader",{on:{load:t.setCsvData}})],1)},lt=[],ct=n("564f"),dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{dragover:function(t){t.preventDefault()}}},[t.isResultShown?n("DataConfResult",{attrs:{"csv-data":t.csvData,fields:t.customerFields,loading:t.loading},on:{confirm:t.confirmDataConfig,cancel:function(e){t.isResultShown=!1}}}):n("div",{staticClass:"row data-conf-wrapper mt-n3"},[n("div",{staticClass:"col-4 d-flex flex-column"},[n("p",{staticClass:"m-0 mb-1"},[t._v(" CSV Fields ")]),n("div",{staticClass:"bg-gray-light px-3 pb-3 flex-grow-1 overflow-auto apply-max-height",on:{dragover:function(t){t.preventDefault()},drop:t.onResetDrop}},t._l(t.csvFieldContainer,(function(t){return n("Draggable",{key:t.id,staticClass:"mt-3",attrs:{field:t}})})),1)]),n("div",{staticClass:"col-8"},[n("p",{staticClass:"m-0 mb-1"},[t._v(" Customer Fields ")]),n("div",{staticClass:"bg-gray-light px-3 pb-3 d-flex justify-content-around flex-wrap overflow-auto apply-max-height"},[t._l(t.customerFields,(function(e){return["dropdown"===e.type?n("Selectable",{key:e.id,staticClass:"mt-3",attrs:{field:e},model:{value:e.selected,callback:function(n){t.$set(e,"selected",n)},expression:"field.selected"}}):n("Dropable",{key:e.id,staticClass:"mt-3",class:{"w-100":"100"===e.width},attrs:{field:e,"csv-field":e.csvField},on:{select:t.selectCsvField}})]}))],2)]),t.isErrorShown?n("span",{staticClass:"col-12 text-danger text-right mt-1 mb-n2"},[t._v(" All required fields(*) must be selected ")]):t._e(),n("div",{staticClass:"col-12 p-3 d-flex justify-content-end mb-n4"},[n("button",{staticClass:"btn btn-primary btn-noborder",on:{click:t.showResult}},[t._v(" Confirm ")])])])],1)},pt=[],mt=(n("4de4"),n("4160"),n("d81d"),n("a434"),n("b0c0"),n("a9e3"),n("25f0"),n("159b"),n("b85c")),ft=n("40eb"),ht=n("f3f5"),vt=n("6fa3"),bt=n("19b1"),gt=n("8b9c"),Ct={name:"DataConfigure",components:{DataConfResult:gt["a"],Draggable:vt["a"],Dropable:ht["a"],Selectable:bt["a"]},props:{csvData:{type:Object,default:function(){return{}}},loading:{type:Boolean,default:!1}},data:function(){return{isErrorShown:!1,customerFields:[],csvFieldContainer:[],isResultShown:!1}},computed:Object(i["a"])({},Object(o["c"])(["groups"])),created:function(){this.customerFields=Object(c["a"])(ft).map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{csvField:{}})}));var t=Object(d["findIndex"])(ft,["id","group"]);this.customerFields[t].options=[{id:0,name:"None"}].concat(Object(c["a"])(this.groups)),this.csvFieldContainer=this.csvData.columns.map((function(t){return{id:Object(d["kebabCase"])(t),name:t,isSelected:!1,customerFieldId:null}}))},methods:{selectCsvField:function(t,e){this.isErrorShown=!1;var n=Object(d["findIndex"])(this.customerFields,["id",t]),a=this.customerFields[n];if(null!=a.csvField.id&&this.removeFromSelected(t,!0),e.isSelected)return this.removeFromSelected(e.customerFieldId),void Object.assign(this.customerFields[n],{csvField:Object(i["a"])(Object(i["a"])({},e),{},{customerFieldId:t})});Object.assign(this.customerFields[n],{csvField:Object(i["a"])(Object(i["a"])({},e),{},{customerFieldId:t,isSelected:!0})});var s=Object(d["findIndex"])(this.csvFieldContainer,["id",e.id]);this.csvFieldContainer.splice(s,1)},removeFromSelected:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(d["findIndex"])(this.customerFields,["id",t]);e&&this.csvFieldContainer.push(Object(i["a"])(Object(i["a"])({},this.customerFields[n].csvField),{},{isSelected:!1,customerFieldId:null})),Object.assign(this.customerFields[n].csvField,{name:null,id:null,isSelected:null,customerFieldId:!1})},onResetDrop:function(t){var e=t.dataTransfer,n=Object(m["i"])(e.getData("text/plain"));return!!(n&&void 0!==n.id&&n.name&&n.isSelected)&&this.removeFromSelected(n.customerFieldId,!0)},validate:function(){var t,e=Object(mt["a"])(this.customerFields);try{for(e.s();!(t=e.n()).done;){var n=t.value,a=!n.csvField,s=!!n.csvField.id;if(n.required&&"dropdown"!==n.type&&(a||!s))return!1}}catch(i){e.e(i)}finally{e.f()}return!0},showResult:function(){this.validate()?this.isResultShown=!0:this.isErrorShown=!0},parse:function(t,e){return t?"string"===e?t.toString():"int"===e?parseInt(t,0):t:null},confirmDataConfig:function(){var t=this,e=null,n=this.customerFields.filter((function(t){return"dropdown"!==t.type||"group"!==t.id||(e=t.selected||null,!1)})),a="";this.customerFields.filter((function(t){if("account_type"===t.id){var e=Object(d["find"])(t.options,(function(e){return Number(e.id)===Number(t.selected)}));return a=e?e.name:"",!1}return!0}));var s=this.csvData.rows.map((function(e){var s={};return n.forEach((function(n){s[n.id]=t.parse(e[n.csvField.name],n.dataType),s.account_type=a})),s}));this.$emit("data-configure",{group_id:e,customers:s})}}},yt=Ct,_t=(n("20ea"),Object(S["a"])(yt,dt,pt,!1,null,"0cb3c47e",null)),xt=_t.exports,wt={name:"ImportCustomers",components:{DataConfigure:xt,CSVUploader:ct["a"]},data:function(){return{csvData:null,isSubmitting:!1}},methods:{setCsvData:function(t){this.csvData=t},submitData:function(t){var e=this;this.isSubmitting=!0,Object(p["a"])(t).then((function(){e.$toast.success("Customers successfully imported"),e.$bus.emit("reload-customer-table"),e.$bus.emit("customer-modal-close")})).catch((function(t){e.$toast.error(t,{duration:1e4})})).finally((function(){e.isSubmitting=!1}))}}},St=wt,It=(n("73dd"),Object(S["a"])(St,ut,lt,!1,null,"071feecf",null)),jt=It.exports,Ot={name:"AddCustomer",components:{ImportCustomers:jt,CreateCustomerForm:rt,Modal:$["a"]},props:{visible:{type:Boolean,default:!1},useCustomerApp:{type:Boolean,default:!1}},data:function(){return{currentLayout:"CUSTOMER-IMPORTER",title:"Add customer"}},created:function(){this.$bus.on("customer-modal-change-title",this.setTitle),this.$bus.on("customer-modal-close",this.onClose),this.fetchGroups()},beforeDestroy:function(){this.$bus.removeAllListeners("customer-modal-change-title"),this.$bus.removeAllListeners("customer-modal-close")},methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])(["fetchGroups"])),{},{isLayoutActive:function(t){return this.currentLayout===t},setTitle:function(t){this.title=t},setLayout:function(t){switch(this.currentLayout=t,t){case"CUSTOMER-FORM":this.title="Create Customer";break;case"CUSTOMER-IMPORTER":this.title="Import Customer";break;default:this.title="Add Customer"}},resetState:function(){this.currentLayout="INITIAL",this.title="Add customer"},onClose:function(){this.$emit("close")}})},Ft=Ot,$t=(n("eb46"),Object(S["a"])(Ft,O,F,!1,null,"48220b46",null)),Dt=$t.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:"Edit Customer",visible:t.visible,"hide-controls":""},on:{close:t.close,closed:t.onClosed}},[n("CardLoader",{attrs:{"is-loading":t.isFetchingData}},[n("Tabs",{staticClass:"mt-n4",attrs:{current:t.activeTab,tabs:t.tabs},on:{change:t.changeTab}},[n("div",{staticClass:"pt-4"},[t.isTabActive("General")?n("Basic",{staticClass:"fade-in",attrs:{loading:t.isSubmitting,"edit-mode":"","use-customer-app":t.useCustomerApp},on:{submit:t.updateCustomer},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}}):t.isTabActive("Phone")?n("Phone",{staticClass:"fade-in",attrs:{"user-id":t.customer.user_id},model:{value:t.customer.phones,callback:function(e){t.$set(t.customer,"phones",e)},expression:"customer.phones"}}):t.isTabActive("Security")&&t.useCustomerApp?n("Security",{staticClass:"fade-in",attrs:{user:{id:t.customer.user_id,token:t.customer.token}}}):t._e()],1)])],1)],1)},At=[],Tt=n("fa43"),Pt=n("71f7"),Et=n("6d04"),Lt=n("a1be"),Ut={name:"UpdateCustomer",components:{Modal:$["a"],Tabs:Tt["a"],Basic:at,Phone:Pt["a"],Security:Et["a"],CardLoader:C["a"]},props:{visible:{type:Boolean,default:!1},customerId:{type:Number,default:null},useCustomerApp:{type:Boolean,default:!1}},data:function(){return{activeTab:"",isFetchingData:!1,isSubmitting:!1,customer:{}}},computed:{tabs:function(){var t=["General","Phone","Security"],e=this.useCustomerApp;return e?t:t.filter((function(t){return"Security"!==t}))}},watch:{visible:function(t){t&&(this.fetchData(),this.fetchGroups())}},methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])(["fetchGroups"])),{},{fetchData:function(){var t=this;this.isFetchingData=!0,Object(p["d"])(this.customerId).then((function(e){t.customer=Object(Lt["a"])(e,t.useCustomerApp),t.activeTab="General"})).catch((function(){t.close(),t.$toast.error("There was an error while fetching customer data!")})).finally((function(){t.isFetchingData=!1}))},updateCustomer:function(t){var e=this;this.isSubmitting=!0,Object(p["g"])(this.customerId,Object(i["a"])(Object(i["a"])({},t),{},{group_id:parseInt(t.group_id,0)||null})).then((function(){e.$toast.success("Customer successfully updated"),e.$bus.emit("reload-customer-table")})).catch((function(t){e.$toast.error(t,{duration:1e4})})).finally((function(){e.isSubmitting=!1}))},close:function(){this.isSubmitting||this.$emit("close")},onClosed:function(){this.activeTab=""},isTabActive:function(t){return this.activeTab===t},changeTab:function(t){this.isSubmitting||(this.activeTab=t)}})},Bt=Ut,Nt=Object(S["a"])(Bt,kt,At,!1,null,null,null),qt=Nt.exports,Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:"Delete Customer",visible:t.visible,loading:t.isLoading},on:{close:t.onClose,success:t.deleteCustomer}},[t._v(" Are you sure you want to delete "+t._s(t.customer.first_name+" "+t.customer.last_name)+"? ")])},Mt=[],Vt={name:"DeleteCustomer",components:{Modal:$["a"]},props:{visible:{type:Boolean,default:!1},customer:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1}},methods:{deleteCustomer:function(){var t=this;this.isLoading=!0,Object(p["c"])(this.customer.id).then((function(){t.$toast.success("Successfully Deleted!"),t.$bus.emit("reload-customer-table")})).catch((function(e){e?t.$toast.error(e):t.$toast.error("There was an error while deleting customer!")})).finally((function(){t.isLoading=!1,t.onClose()}))},onClose:function(){this.isLoading||this.$emit("close")}}},Gt=Vt,zt=Object(S["a"])(Gt,Rt,Mt,!1,null,null,null),Jt=zt.exports,Ht={name:"Customers",components:{AddCustomer:Dt,CustomerTable:j,ContentHeader:r["a"],DeleteCustomer:Jt,UpdateCustomer:qt},data:function(){return{isAddCustomerShown:!1,isDeleteCustomerShown:!1,isEditCustomerShown:!1,targetCustomer:{}}},computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])(["organization"])),{},{useCustomerApp:function(){return!!this.organization.use_customer_app||!1}}),methods:{onDeleteCustomer:function(t){this.targetCustomer=t,this.isDeleteCustomerShown=!0},onEditCustomer:function(t){this.targetCustomer=t,this.isEditCustomerShown=!0}}},Kt=Ht,Qt=Object(S["a"])(Kt,a,s,!1,null,null,null);e["default"]=Qt.exports},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");var a=n("06c5");function s(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Object(a["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var s=0,i=function(){};return{s:i,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){u=!0,o=t},f:function(){try{r||null==n["return"]||n["return"]()}finally{if(u)throw o}}}}},c6b1:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("InputBase",{attrs:{title:t.title,required:t.required,error:t.error},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.id,s=e.isInvalid;return[n("textarea",{ref:"input",staticClass:"form-control",class:{"is-invalid":s},attrs:{id:a,cols:t.cols,rows:t.rows,required:t.required,placeholder:t.placeholder},domProps:{value:t.value},on:{change:t.onChange,input:t.updateInput}})]}}])})},s=[],i=(n("a9e3"),n("850b")),o={name:"InputTextArea",components:{InputBase:i["a"]},props:{title:{type:String,default:""},cols:{type:[String,Number],default:30},rows:{type:[String,Number],default:10},onChange:{type:Function,default:function(){return[]}},value:{type:String,default:""},required:{type:Boolean,default:!1},placeholder:{type:String,default:""},error:{type:String,default:""}},methods:{updateInput:function(){this.$emit("input",this.$refs.input.value)}}},r=o,u=n("2877"),l=Object(u["a"])(r,a,s,!1,null,"7e79a4cc",null);e["a"]=l.exports},cad3:function(t,e,n){"use strict";var a=n("6bad"),s=n.n(a);s.a},e064:function(t,e,n){},e0c2:function(t,e,n){},e97d:function(t,e,n){"use strict";var a=n("16de"),s=n.n(a);s.a},eb46:function(t,e,n){"use strict";var a=n("27dc"),s=n.n(a);s.a},ebce:function(t,e,n){"use strict";var a=n("e0c2"),s=n.n(a);s.a},f3f5:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-2 bg-white custom-border-radius",class:{"drag-over":t.isDragging},on:{dragenter:function(e){t.isDragging=!0},dragleave:function(e){t.isDragging=!1},dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),t.onDrop(e)}}},[n("div",{staticClass:"w-100 d-flex flex-column align-items-center",class:{"disable-pointer-event":t.isDragging}},[n("p",{staticClass:"m-0 text-center"},[t._v(" "+t._s(t.field.name)+" "),t.field.required?n("span",{staticClass:"text-danger"},[t._v("*")]):t._e()]),n("div",{staticClass:"drop-box bg-gray-light d-flex p-1",class:{"w-100":"100"===t.field.width}},[null!=t.csvField.id?n("Draggable",{staticClass:"flex-grow-1",attrs:{field:t.csvField}}):t._e()],1)])])},s=[],i=(n("b0c0"),n("ab74")),o=n("6fa3"),r={name:"Dropable",components:{Draggable:o["a"]},props:{field:{type:Object,default:null},csvField:{type:Object,default:null}},data:function(){return{isDragging:!1}},methods:{onDrop:function(t){var e=t.dataTransfer;this.isDragging=!1;var n=Object(i["i"])(e.getData("text/plain"));n&&void 0!==n.id&&n.name&&n.id!==this.csvField.id&&this.$emit("select",this.field.id,n)}}},u=r,l=(n("9d4f"),n("2877")),c=Object(l["a"])(u,a,s,!1,null,"d569bc86",null);e["a"]=c.exports},f67a:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-wrapper h-100"},[n("div",{staticClass:"h-100 d-flex flex-column"},[t.loading?n("div",{staticClass:"h-100 w-100 d-flex justify-content-center align-items-center"},[n("div",{staticStyle:{width:"30px"}},[n("Loader")],1)]):[t.url?n("div",{staticClass:"d-flex image-wrapper justify-content-center align-items-center flex-grow-1"},[n("img",{staticClass:"d-flex img-fluid",attrs:{src:t.url}})]):n("div",{staticClass:"placeholder d-flex justify-content-center align-items-center flex-grow-1",on:{click:t.openFileExplorer}},[n("i",{staticClass:"fa-4x",class:t.icon})])],n("div",{staticClass:"d-flex pt-2 bg-white"},[n("button",{staticClass:"btn btn-sm btn-success btn-noborder mr-1 flex-grow-1",attrs:{type:"button",disabled:t.loading},on:{click:function(e){return e.preventDefault(),t.openFileExplorer(e)}}},[t._v(" Upload ")]),n("button",{staticClass:"btn btn-sm btn-danger btn-noborder ml-1 flex-grow-1",attrs:{type:"button",disabled:t.loading},on:{click:function(e){return e.preventDefault(),t.$emit("remove")}}},[t._v(" Remove ")])])],2),n("input",{ref:"inpFile",staticClass:"d-none",attrs:{type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif"},on:{change:t.uploadImage}})])},s=[],i=n("9333"),o={name:"ImageUpload",components:{Loader:i["a"]},props:{url:{type:String,default:""},icon:{type:String,default:"si si-user"},loading:{type:Boolean,default:!1}},methods:{openFileExplorer:function(){this.$refs.inpFile.click()},uploadImage:function(t){var e=t.target;if(e.files.length){var n=e.files[0],a=1e-6*n.size;a>10?this.$toast.error("Image size must be lower than 10mb."):this.$emit("upload",n)}}}},r=o,u=(n("06bc"),n("2877")),l=Object(u["a"])(r,a,s,!1,null,"47cb7866",null);e["a"]=l.exports},fa43:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block mb-0"},[n("ul",{staticClass:"nav nav-tabs nav-tabs-alt",attrs:{"data-toggle":"tabs",role:"tablist"}},t._l(t.tabs,(function(e,a){return n("li",{key:a,staticClass:"nav-item"},[n("a",{staticClass:"nav-link text-capitalize",class:{active:t.current===e},attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.$emit("change",e)}}},[t._v(t._s(e))])])})),0),n("div",{staticClass:"tab-content"},[t._t("default")],2)])},s=[],i={props:{current:{type:String,default:""},tabs:{type:Array,default:function(){return[]}}}},o=i,r=n("2877"),u=Object(r["a"])(o,a,s,!1,null,null,null);e["a"]=u.exports}}]);