(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"020b":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block custom-border-radius custom-box-shadow"},[t._t("default")],2)},n=[],r={name:"CardBase"},i=r,c=a("2877"),o=Object(c["a"])(i,s,n,!1,null,"6a27c542",null);e["a"]=o.exports},"066a":function(t,e,a){"use strict";var s=a("aa08"),n=a.n(s);n.a},"1a1f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-xl-n4 mb-4"},[a("div",{staticClass:"col-md-6"},[a("h5",{staticClass:"m-0 text-muted"},[t._t("default")],2)]),a("div",{staticClass:"col-md-6 text-right"},[t._t("extra")],2)])},n=[],r={name:"ContentHeader"},i=r,c=a("2877"),o=Object(c["a"])(i,s,n,!1,null,"adffe014",null);e["a"]=o.exports},3021:function(t,e,a){},3805:function(t,e,a){"use strict";var s=a("bee0"),n=a.n(s);n.a},"45b7":function(t,e,a){"use strict";var s=a("ed75"),n=a.n(s);n.a},4661:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{title:t.title}},[a("i",{class:t.iconClass}),t._v(" "+t._s(t._f("formatCurrency")(t.fund))+" ")])},n=[],r={name:"TransactionFundColumn",props:{fund:{type:[Number,String],default:0},fundType:{type:String,default:"CREDIT"},accountType:{type:String,default:"SAVINGS"}},computed:{title(){const{fundType:t,accountType:e}=this;return"LOAN"===e?`Rs.${this.fund} was paid`:`Rs.${this.fund} was ${t.toLowerCase()}ed`},iconClass(){const{fundType:t,accountType:e}=this;return"LOAN"===e?"fa fa-arrow-down text-warning":"fa fa-"+("DEBIT"===t?"arrow-up text-danger":"arrow-down text-success")}}},i=r,c=a("2877"),o=Object(c["a"])(i,s,n,!1,null,null,null);e["a"]=o.exports},"4a3b":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"text-capitalize"},[a("span",{staticClass:"d-inline-block status rounded-circle mr-2",class:t.spanClass}),t._v(" "+t._s(t.status.toLowerCase())+" ")])},n=[];const r={ACCEPTED:"success",HOLD:"warning",PENDING:"warning",CANCELLED:"danger",REJECTED:"danger"};var i={name:"TransactionStatusColumn",props:{status:{type:String,default:"ACCEPTED"}},computed:{spanClass(){return"bg-"+r[this.status]}}},c=i,o=(a("066a"),a("2877")),l=Object(o["a"])(c,s,n,!1,null,"3f9ca497",null);e["a"]=l.exports},"7ede":function(t,e,a){"use strict";a.d(e,"d",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return d})),a.d(e,"e",(function(){return u})),a.d(e,"c",(function(){return m}));var s=a("5530"),n=a("15fd"),r=a("9819"),i=a("5b67");function c(t){return t.start||t.end?{min_amount:t.start||0,max_amount:t.end||null}:{}}function o(t={amountRange:{}}){const{collectorId:e,amountRange:a}=t,o=Object(n["a"])(t,["collectorId","amountRange"]);return Object(r["a"])({url:"transactions",method:"get",cancelPrevious:!0,params:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},o),Object(i["a"])()),c(a)),{},{collector_id:e})})}function l(t){return Object(r["a"])({url:"transactions",method:"post",data:t})}function d(t,e){return Object(r["a"])({url:`transactions/${t}/approve`,method:"patch",data:e})}function u(t){return Object(r["a"])({url:"transaction/import-amounts",method:"patch",data:t})}function m(t){return Object(r["a"])({url:"transactions/export",method:"post",data:t})}},9406:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("DashboardHeader"),a("BalanceAlert"),a("FundDetailCards"),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("TopCustomers")],1),a("div",{staticClass:"col-md-6"},[a("TopCollectors")],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("RecentTransactions")],1)])],1)},n=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("BlockCard",{staticClass:"min-height-370",attrs:{title:"Top Customers"}},[t.customers.length?a("table",{staticClass:"table table-borderless table-vcenter"},[a("tbody",t._l(t.customers,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.customer_name))]),a("td",{staticClass:"text-success"},[t._v(" "+t._s(t._f("formatCurrency")(e.total_amount))+" ")]),a("td",{staticClass:"text-right text-success",staticStyle:{"min-width":"50px"}},[a("div",{staticClass:"progress push m-0",staticStyle:{height:"8px"}},[a("div",{staticClass:"progress-bar bg-success",style:{width:e.percent+"%"},attrs:{role:"progressbar"}})])])])})),0)]):a("div",{staticClass:"d-flex justify-content-center align-items-center flex-grow-1"},[a("p",{staticClass:"text-gray-dark mb-4",staticStyle:{"font-size":"17px"}},[t._v(" No customer or transaction found ")])])])],1)},i=[],c=a("2f62"),o=a("f4f7"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CardBase",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"block-header"},[a("h3",{staticClass:"block-title"},[t._v(" "+t._s(t.title)+" ")]),a("div",{staticClass:"block-options"},[a("div",{staticClass:"block-options-item"},[t._t("options")],2)])]),a("div",{staticClass:"block-content flex-grow-1 d-flex flex-column"},[t._t("default")],2)])},d=[],u=a("020b"),m={name:"BlockCard",components:{CardBase:u["a"]},props:{title:{type:String,default:""}}},f=m,h=(a("b0e5"),a("2877")),b=Object(h["a"])(f,l,d,!1,null,"68e6cbeb",null),p=b.exports,g=a("c2cd");const v="60000";var _={data(){return{timer:null,isDestroyed:!1}},beforeDestroy(){this.isDestroyed=!0,this.clearTimer()},methods:{clearTimer(){this.timer&&clearTimeout(this.timer),this.timer=null},setTimer(t){this.clearTimer(),this.isDestroyed||(this.timer=setTimeout(t,v))}}},C={name:"TopCustomers",components:{CardLoader:g["a"],BlockCard:p},mixins:[_],data(){return{isLoading:!1,customers:[]}},computed:Object(c["c"])(["dateFilter"]),watch:{dateFilter:{handler(){this.fetchData()},immediate:!0}},mounted(){this.$bus.on("router-link-clicked",()=>{this.fetchData()})},methods:{fetchData(t=!1){this.clearTimer(),t||(this.isLoading=!0),Object(o["e"])().then(t=>{this.customers=t.data,this.isLoading=!1,this.setTimer(()=>{this.fetchData(!0)})}).catch(t=>{"request-cancel"!==t&&(this.$toast.error("There was an error while fetching data."),this.isLoading=!1)})}}},y=C,x=Object(h["a"])(y,r,i,!1,null,null,null),w=x.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("BlockCard",{staticClass:"min-height-370",attrs:{title:"Top Collectors"}},[t.collectors.length?a("table",{staticClass:"table table-borderless table-vcenter"},[a("tbody",t._l(t.collectors,(function(e,s){return a("tr",{key:s},[a("td",[t._v(" "+t._s(e.collector_name)+" ")]),a("td",{staticClass:"text-success"},[t._v(" "+t._s(t._f("formatCurrency")(e.total_amount))+" ")]),a("td",{staticClass:"text-right text-success",staticStyle:{"min-width":"50px"}},[a("div",{staticClass:"progress push m-0",staticStyle:{height:"8px"}},[a("div",{staticClass:"progress-bar bg-success",style:{width:e.percent+"%"},attrs:{role:"progressbar"}})])])])})),0)]):a("div",{staticClass:"d-flex justify-content-center align-items-center flex-grow-1"},[a("p",{staticClass:"text-gray-dark mb-4",staticStyle:{"font-size":"17px"}},[t._v(" No collectors or transaction found ")])])])],1)},D=[],O={name:"TopCollectors",components:{CardLoader:g["a"],BlockCard:p},mixins:[_],data(){return{isLoading:!1,collectors:[]}},computed:Object(c["c"])(["dateFilter"]),watch:{dateFilter:{handler(){this.fetchData()},immediate:!0}},mounted(){this.$bus.on("router-link-clicked",()=>{this.fetchData()})},methods:{fetchData(t){this.clearTimer(),t||(this.isLoading=!0),Object(o["d"])().then(t=>{this.collectors=t.data,this.isLoading=!1,this.setTimer(()=>{this.fetchData(!0)})}).catch(t=>{"request-cancel"!==t&&(this.$toast.error("There was an error while fetching data."),this.isLoading=!1)})}}},T=O,k=Object(h["a"])(T,j,D,!1,null,"b10e1eba",null),L=k.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("BlockCard",{staticClass:"d-flex min-height-370",attrs:{title:"Recent Transactions"}},[t.transactions.length?a("div",{staticClass:"d-flex flex-column justify-content-between flex-grow-1"},[a("table",{staticClass:"table table-borderless table-vcenter"},[a("thead",[a("tr",[a("th",{staticStyle:{width:"20%"}},[t._v(" Customer ")]),a("th",[t._v(" A/C Number ")]),a("th",[t._v(" A/C Type ")]),a("th",[t._v(" Amount ")]),a("th",[t._v(" Status ")]),a("th",[t._v(" Date ")]),a("th",[t._v(" Time ")])])]),a("tbody",t._l(t.transactions,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.customer_name))]),a("td",[t._v(t._s(e.account_number))]),a("td",[t._v(t._s(e.account_type))]),a("td",[a("TransactionFundColumn",{attrs:{fund:e.amount,"account-type":e.account_type,"fund-type":e.entry}})],1),a("td",[a("TransactionStatusColumn",{attrs:{status:e.status}})],1),a("td",[t._v(" "+t._s(e.entry_date_np)+" ")]),a("td",[t._v(" "+t._s(e.entry_time)+" ")])])})),0)]),a("div",{staticClass:"d-flex justify-content-end"},[a("router-link",{staticClass:"mr-4 mb-2",attrs:{to:"/transaction"}},[t._v(" Show More ")])],1)]):a("div",{staticClass:"d-flex justify-content-center align-items-center flex-grow-1"},[a("p",{staticClass:"text-gray-dark mb-4",staticStyle:{"font-size":"17px"}},[t._v(" No Recent Transactions ")])])])],1)},S=[],E=a("2ef0"),$=a("7ede"),R=a("4661"),A=a("4a3b"),B={name:"RecentTransactions",components:{CardLoader:g["a"],TransactionStatusColumn:A["a"],TransactionFundColumn:R["a"],BlockCard:p},mixins:[_],data(){return{isLoading:!1,transactions:[]}},computed:Object(c["c"])(["dateFilter"]),watch:{dateFilter:{handler(){this.fetchData()},immediate:!0}},mounted(){this.$bus.on("router-link-clicked",()=>{this.fetchData()})},methods:{fetchData(t){this.clearTimer(),t||(this.isLoading=!0),Object($["d"])().then(t=>{this.transactions=Object(E["slice"])(t.data,0,6),this.setTimer(()=>this.fetchData(!0)),this.isLoading=!1}).catch(t=>{"request-cancel"!==t&&(this.$toast.error("There was an error while fetching data."),this.isLoading=!1)})}}},N=B,P=(a("3805"),Object(h["a"])(N,F,S,!1,null,"75b71124",null)),z=P.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentHeader",[t._v(" Dashboard "),a("template",{slot:"extra"},[a("DataDateFilter")],1)],2)},H=[],M=a("1a1f"),q=a("9e4f"),J={name:"DashboardHeader",components:{DataDateFilter:q["a"],ContentHeader:M["a"]}},Y=J,G=Object(h["a"])(Y,I,H,!1,null,"48288fb2",null),V=G.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("DashCard",{attrs:{title:"Debit",icon:"fa fa-arrow-up",content:t._f("formatCurrency")(t.amounts.debit_amount||0),color:"danger"}})],1)],1),a("div",{staticClass:"col-md-3"},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("DashCard",{attrs:{title:"Credit",icon:"fa fa-arrow-down",content:t._f("formatCurrency")(t.amounts.credit_amount||0),color:"success"}})],1)],1),a("div",{staticClass:"col-md-3"},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("DashCard",{attrs:{title:"Loan",icon:"fa fa-arrow-down",content:t._f("formatCurrency")(t.amounts.loan_amount||0),color:"warning"}})],1)],1),a("div",{staticClass:"col-md-3"},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("DashCard",{attrs:{title:"Total",icon:"fa fa-database",content:t._f("formatCurrency")(t.amounts.total_amount||0),color:"primary"}})],1)],1)])},K=[],Q=a("a43d"),U={name:"FundDetailCards",components:{CardLoader:g["a"],DashCard:Q["a"]},mixins:[_],data(){return{isLoading:!1,amounts:{}}},computed:Object(c["c"])(["dateFilter"]),watch:{dateFilter:{handler(){this.fetchData()},immediate:!0}},mounted(){this.$bus.on("router-link-clicked",()=>{this.fetchData()})},methods:{fetchData(t){this.clearTimer(),t||(this.isLoading=!0),Object(o["a"])().then(t=>{this.amounts=t,this.isLoading=!1,this.setTimer(()=>{this.fetchData(!0)})}).catch(t=>{"request-cancel"!==t&&(this.$toast.error("There was an error while fetching data."),this.isLoading=!1)})}}},X=U,Z=Object(h["a"])(X,W,K,!1,null,"511613ba",null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isInTrial?a("Alert",{attrs:{closable:!1,type:t.hasTrialExpired?"danger":"info"}},[t.hasTrialExpired?a("span",[t._v(" The trial period has been expired. Please "),a("a",{staticStyle:{"text-decoration":"underline"},attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://sajilobachat.com/#section-contact"}},[t._v("contact us")]),t._v(" to recharge your account. ")]):a("span",[t._v(" Your account is currently in a trial mode and it will expire in "+t._s(t.trialDays)+" day(s). "),a("a",{staticStyle:{"text-decoration":"underline"},attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://sajilobachat.com/#section-contact"}},[t._v("Contact us")]),t._v(" to recharge your account. ")])]):t.balance<50&&t.balance>0?a("Alert",{attrs:{closable:!1,type:"warning"}},[t._v(" Your balance is lower than "),a("strong",[t._v("Rs.50")]),t._v(", "),a("a",{staticStyle:{"text-decoration":"underline"},attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://sajilobachat.com/#section-contact"}},[t._v("Contact us")]),t._v(" to recharge your account. ")]):t.balance<=0?a("Alert",{attrs:{closable:!1,type:"danger"}},[t._v(" Your balance is Rs.0, No further transaction would be accepted. Please "),a("a",{staticStyle:{"text-decoration":"underline"},attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://sajilobachat.com/#section-contact"}},[t._v("contact us")]),t._v(" to recharge your account. ")]):t._e()},at=[],st=a("5530"),nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["alert py-3",t.alertClass,t.animation]},[a("i",{class:["mr-2",t.icon]}),a("span",[t._t("default")],2),t.closable?a("button",{staticClass:"close",attrs:{tabIndex:"-1"},on:{click:t.close}},[a("span",[t._v("Ã—")])]):t._e()])},rt=[];const it={warning:"text-black bg-warning",success:"text-white bg-success",danger:"text-white bg-danger",info:"text-white bg-info"},ct={success:"fa fa-check-circle",info:"fa fa-info-circle",danger:"fa fa-times-circle",warning:"fa fa-warning"};var ot={name:"Alert",props:{type:{type:String,default:""},closable:{type:Boolean,default:!0}},data(){return{animation:"fade-in"}},computed:{alertClass(){return it[this.type]},icon(){return ct[this.type]}},methods:{close(){this.animation="fade-out",setTimeout(()=>{this.$emit("close")},150)}}},lt=ot,dt=Object(h["a"])(lt,nt,rt,!1,null,null,null),ut=dt.exports,mt={name:"BalanceAlert",components:{Alert:ut},computed:Object(st["a"])(Object(st["a"])({},Object(c["c"])(["balance","organization"])),{},{isInTrial(){return!!this.organization.is_in_trial},trialDays(){return this.organization.trial_days},hasTrialExpired(){return this.organization.trial_days<=0}})},ft=mt,ht=Object(h["a"])(ft,et,at,!1,null,null,null),bt=ht.exports,pt={name:"Dashboard",components:{FundDetailCards:tt,DashboardHeader:V,RecentTransactions:z,TopCollectors:L,TopCustomers:w,BalanceAlert:bt}},gt=pt,vt=Object(h["a"])(gt,s,n,!1,null,null,null);e["default"]=vt.exports},"9e4f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-sm btn-secondary text-gray-dark",class:{active:t.isFilterActive("daily")},on:{click:function(e){return t.setFilter("daily")}}},[t._v(" Daily ")]),a("button",{staticClass:"btn btn-sm btn-secondary text-gray-dark",class:{active:t.isFilterActive("weekly")},on:{click:function(e){return t.setFilter("weekly")}}},[t._v(" Weekly ")]),a("button",{staticClass:"btn btn-sm btn-secondary text-gray-dark ",class:{active:t.isFilterActive("monthly")},on:{click:function(e){return t.setFilter("monthly")}}},[t._v(" Monthly ")]),a("div",{staticClass:"btn-group",attrs:{role:"group"}},[a("Menu",{scopedSlots:t._u([{key:"trigger",fn:function(e){var s=e.on;return[a("button",t._g({staticClass:"btn btn-sm btn-secondary text-gray-dark dropdown-toggle",class:{active:t.isFilterActive("period")}},s),[t._v(" Period ")])]}}])},[a("div",{staticClass:"bg-white p-2 border rounded",staticStyle:{width:"300px"}},[a("div",{staticClass:"form-group row mb-0"},[a("DateRangePicker",{staticClass:"m-0",on:{select:function(e){return t.setFilter("period")}},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1)])])],1)])},n=[],r=a("5530"),i=a("2f62"),c=a("d9e1"),o=a("2ea9"),l={name:"DataDateFilter",components:{DateRangePicker:c["a"],Menu:o["a"]},data(){return{dateRange:{from:"",to:""}}},computed:Object(r["a"])({},Object(i["c"])(["dateFilter"])),methods:Object(r["a"])(Object(r["a"])({},Object(i["d"])(["setDateFilter"])),{},{isFilterActive(t){return this.dateFilter.type===t},setFilter(t){"period"!==t?(this.dateRange={from:"",to:""},this.setDateFilter({type:t})):this.setDateFilter({type:t,startDate:this.dateRange.from,endDate:this.dateRange.to})}})},d=l,u=a("2877"),m=Object(u["a"])(d,s,n,!1,null,null,null);e["a"]=m.exports},a43d:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Button",{staticClass:"btn w-100 block custom-box-shadow custom-border-radius"},[a("div",{staticClass:"block-content block-content-full"},[a("div",{staticClass:"py-20 text-center"},[a("div",{class:["mb-20","text-"+t.color]},[a("i",{class:["fa-3x",t.icon]})]),a("div",{staticClass:"font-size-h4 font-w600 mb-3",class:"text-"+t.color},[t._v(" "+t._s(t.content)+" ")]),a("div",{staticClass:"font-size-sm font-w600 text-uppercase text-muted"},[t._v(" "+t._s(t.title)+" ")])])])])},n=[],r=a("ad4f"),i={name:"DashCard",components:{Button:r["a"]},props:{title:{type:String,default:""},content:{type:String,default:""},color:{type:String,default:"primary"},icon:{type:String,default:""}}},c=i,o=a("2877"),l=Object(o["a"])(c,s,n,!1,null,null,null);e["a"]=l.exports},aa08:function(t,e,a){},b0e5:function(t,e,a){"use strict";var s=a("3021"),n=a.n(s);n.a},bee0:function(t,e,a){},c2cd:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{class:{"position-relative":t.isLoading}},[t._t("default"),t.isLoading?a("div",{staticClass:"custom-border-radius dropshadow",style:{background:"rgba(255, 255, 255, "+t.opacity+")"}},[a("div",{staticClass:"loader d-flex justify-content-center align-items-center"},[a("div",{style:{width:"40px"}},[a("Loader")],1)])]):t._e()],2)])},n=[],r=a("9333"),i={name:"CardLoader",components:{Loader:r["a"]},props:{isLoading:{type:Boolean,default:!1},loadingMinHeight:{type:String,default:"0px"},opacity:{type:Number,default:1}}},c=i,o=(a("45b7"),a("2877")),l=Object(o["a"])(c,s,n,!1,null,"6ad3b29c",null);e["a"]=l.exports},ed75:function(t,e,a){},f4f7:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"d",(function(){return c})),a.d(e,"e",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return d}));var s=a("5530"),n=a("9819"),r=a("5b67");function i(){return Object(n["a"])({url:"aggregate/amounts",method:"get",params:Object(s["a"])({},Object(r["a"])()),cancelPrevious:!0})}function c(){return Object(n["a"])({url:"aggregate/collectors",method:"get",params:Object(s["a"])({per_page:7},Object(r["a"])()),cancelPrevious:!0})}function o(){return Object(n["a"])({url:"aggregate/customers",method:"get",params:Object(s["a"])({per_page:7},Object(r["a"])()),cancelPrevious:!0})}function l(){return Object(n["a"])({url:"aggregate/approvals",method:"get"})}function d(){return Object(n["a"])({url:"aggregate/billings",method:"get"})}}}]);