(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["collectors"],{"21c7":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ContentHeader",[t._v(" Collector "),s("template",{slot:"extra"},[s("button",{staticClass:"btn btn-primary ml-2 btn-noborder",on:{click:function(e){t.isAddCollectorShown=!0}}},[t._v(" Add Collector ")])])],2),s("CollectorTable",{on:{fund:t.onFundModalOpen,delete:t.onDeleteCollector,edit:t.onEditCollector}}),s("AddFund",{attrs:{collector:t.targetCollector,visible:t.isFundModalShown},on:{close:function(e){t.isFundModalShown=!1}}}),s("DeleteCollector",{attrs:{visible:t.isDeleteModalShown,collector:t.targetCollector},on:{close:function(e){t.isDeleteModalShown=!1}}}),s("CreateCollector",{attrs:{visible:t.isAddCollectorShown},on:{close:function(e){t.isAddCollectorShown=!1}}}),s("UpdateCollector",{attrs:{"collector-id":t.targetCollector.id,visible:t.isEditCollectorShown},on:{close:function(e){t.isEditCollectorShown=!1}}})],1)},i=[],o=s("1a1f"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("UpdateStatus",{attrs:{visible:t.isStatusModalShown,user:t.targetCollector,status:t.targetCollector.status,submission:t.updateStatus},on:{success:t.setStatus,close:function(e){t.isStatusModalShown=!1}}}),s("CardBase",{staticClass:"p-4 mb-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3"},[s("InputSelect",{attrs:{title:"Status","option-value":"value","option-text":"name",options:t.statuses},on:{select:function(e){return t.fetchData()}},model:{value:t.dataFilters.status,callback:function(e){t.$set(t.dataFilters,"status",e)},expression:"dataFilters.status"}})],1),s("div",{staticClass:"col-md-3"}),s("div",{staticClass:"col-md-6"},[s("Search",{staticClass:"mt-4 pt-1",attrs:{debounce:500},on:{change:function(e){return t.fetchData()}},model:{value:t.dataFilters.keyword,callback:function(e){t.$set(t.dataFilters,"keyword",e)},expression:"dataFilters.keyword"}})],1)])]),s("CardLoader",{attrs:{"is-loading":t.isLoading}},[s("CardBase",{staticClass:"table-responsive"},[t.collectors.length?s("table",{staticClass:"table table-vcenter m-0"},[s("thead",{staticClass:"bg-gray-lighter"},[s("tr",[s("th",{staticClass:"text-center"},[t._v(" # ")]),s("th",[t._v(" Photo ")]),s("th",{staticClass:"pl-4"},[t._v(" Full Name ")]),s("th",[t._v("Phone")]),s("th",[t._v(" Total Amount "),s("i",{staticClass:"si si-info",attrs:{title:"Total amount since last update"}})]),s("th",[t._v(" Last Online ")]),s("th",{staticClass:"text-center"},[t._v(" Status ")]),s("th",{staticStyle:{width:"130px"}})])]),s("tbody",t._l(t.collectors,(function(e,a){return s("tr",{key:e.index},[s("td",{staticClass:"text-center"},[t._v(" "+t._s(a+1)+" ")]),s("td",[s("ImageColumn",{attrs:{url:e.avatar_url}})],1),s("td",{staticClass:"pl-4 ml-4"},[t._v(" "+t._s(e.fullname||e.first_name+" "+e.last_name)+" ")]),s("td",[t._v(" "+t._s(e.phone)+" ")]),s("td",[t._v(" "+t._s(t._f("formatCurrency")(e.amounts.total_amount))+" ")]),s("td",[s("LastOnlineCol",{attrs:{status:e.last_online}})],1),s("td",{staticClass:"text-center"},[s("StatusColumn",{attrs:{status:e.is_active},on:{change:function(s){return t.onStatusUpdate(e,s)}}})],1),s("td",[s("div",{staticClass:"d-flex flex-row justify-content-around"},[t._e(),s("button",{staticClass:"btn btn-sm btn-success btn-noborder",attrs:{title:"Edit Collector"},on:{click:function(s){return t.$emit("edit",e)}}},[s("i",{staticClass:"si si-note"})])])])])})),0)]):s("div",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[s("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" No Data Found ")])])])],1),s("div",{staticClass:"d-flex justify-content-between align-items-center flex-wrap"},[s("div",[t._v(" "+t._s(t.pagination.message)+" ")]),s("div",{staticClass:"d-flex justify-content-center"},[s("InputSelect",{attrs:{options:[5,15,25,50,100]},on:{select:function(e){return t.fetchData()}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),s("Pagination",{attrs:{length:t.pagination.pages,current:t.pagination.current},on:{change:t.changePagination}})],1)])],1)},l=[],r=s("15fd"),c=s("5530"),u=s("2ef0"),d=s("395b"),h=s("ab74"),m=s("020b"),p=s("0af5"),f=s("9c4f"),b=s("31e6"),v=s("0f8e"),g=s("c2cd"),C=s("7e22"),y=s("9a1a"),w=s("66cb"),_={name:"CollectorTable",components:{Search:f["a"],Pagination:v["a"],InputSelect:p["a"],CardBase:m["a"],CardLoader:g["a"],ImageColumn:b["a"],StatusColumn:y["a"],UpdateStatus:w["a"],LastOnlineCol:C["a"]},data(){return{collectors:[],isLoading:!1,isStatusModalShown:!1,targetCollector:{},statuses:[{name:"All",value:null},{name:"Active",value:1},{name:"Inactive",value:0}],dataFilters:{status:1,keyword:""},pagination:{pages:1,current:1,perPage:15}}},created(){this.$bus.on("reload-collector-table",this.fetchData),this.fetchData()},beforeDestroy(){this.$bus.removeAllListeners("reload-collector-table")},mounted(){this.$bus.on("router-link-clicked",()=>{this.isLoading||this.fetchData()})},methods:{updateStatus:d["i"],setStatus(){const t=this.targetCollector,e=Object(u["findIndex"])(this.collectors,["id",t.id]);this.collectors[e].is_active=t.status?1:0},onStatusUpdate(t,e){this.targetCollector=Object(c["a"])(Object(c["a"])({},t),{},{status:e}),this.isStatusModalShown=!0},fetchData(t=null){const{status:e,keyword:s}=this.dataFilters;this.isLoading=!0,Object(d["d"])({page:t,is_active:e||null,keyword:s||null,per_page:this.pagination.perPage}).then(({data:t,meta:e})=>{this.collectors=t.map(t=>{let{phones:e}=t,s=Object(r["a"])(t,["phones"]);return Object(c["a"])(Object(c["a"])({},s),{},{phone:Object(h["g"])(e)})}),this.pagination=Object(h["f"])(e),this.isLoading=!1}).catch(t=>{"request-cancel"!==t&&(this.$toast.error("There was an error while fetching data."),this.isLoading=!1)})},changePagination(t){this.pagination.current=t,this.fetchData(t)}}},S=_,F=s("2877"),x=Object(F["a"])(S,n,l,!1,null,null,null),P=x.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Create Collector",visible:t.visible,"hide-controls":""},on:{close:t.close,closed:t.onClosed}},[s("User",{staticClass:"fade-in",attrs:{loading:t.isLoading},on:{submit:t.createCollector},model:{value:t.collector,callback:function(e){t.collector=e},expression:"collector"}})],1)},j=[],O=s("47a4"),k=s("78b5"),A={name:"CollectorForm",components:{Modal:k["a"],User:O["a"]},props:{visible:{type:Boolean,default:!1}},data(){return{collector:{},isLoading:!1,isUserFormShown:!0}},methods:{createCollector(){this.isLoading=!0;const{collector:t}=this,{first_name:e,last_name:s}=t;Object(d["a"])(Object(c["a"])(Object(c["a"])({},t),{},{fullname:`${e} ${s}`})).then(()=>{this.$bus.emit("reload-collector-table"),this.$toast.success("Collector Successfully Created"),this.isLoading=!1,this.close()}).catch(t=>{this.$toast.error(t,{duration:1e4}),this.isLoading=!1})},close(){this.isLoading||this.$emit("close")},onClosed(){this.collector={},this.isUserFormShown=!0}}},D=A,E=(s("9b38"),Object(F["a"])(D,$,j,!1,null,"6e90fd68",null)),T=E.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Edit Collector",visible:t.visible,"hide-controls":""},on:{close:t.close,closed:t.onClosed}},[s("CardLoader",{attrs:{"is-loading":t.isFetchingData}},[s("Tabs",{staticClass:"mt-n4",attrs:{current:t.activeTab,tabs:["General","Phone","Security"]},on:{change:t.changeTab}},[s("div",{staticClass:"pt-4"},[t.isTabActive("General")?s("User",{staticClass:"fade-in",attrs:{loading:t.isSubmitting,"edit-mode":""},on:{submit:t.updateCollector},model:{value:t.collector,callback:function(e){t.collector=e},expression:"collector"}}):t.isTabActive("Phone")?s("Phone",{staticClass:"fade-in",attrs:{"user-id":t.collector.user_id},on:{updated:t.reloadTable},model:{value:t.collector.phones,callback:function(e){t.$set(t.collector,"phones",e)},expression:"collector.phones"}}):t.isTabActive("Security")?s("Security",{staticClass:"fade-in",attrs:{user:{id:t.collector.user_id,token:t.collector.token}}}):t._e()],1)])],1)],1)},B=[],M=s("fa43"),U=s("71f7"),I=s("6d04"),N=s("a1be"),q={name:"UpdateCollector",components:{Modal:k["a"],Tabs:M["a"],User:O["a"],Phone:U["a"],Security:I["a"],CardLoader:g["a"]},props:{visible:{type:Boolean,default:!1},collectorId:{type:Number,default:1}},data(){return{activeTab:"",isFetchingData:!1,isSubmitting:!1,collector:{}}},watch:{visible(t){t&&this.fetchData()}},methods:{fetchData(){this.isFetchingData=!0,Object(d["c"])(this.collectorId).then(t=>{this.collector=Object(N["d"])(t),this.activeTab="General"}).catch(()=>{this.close(),this.$toast.error("There was an error while fetching collector data!")}).finally(()=>{this.isFetchingData=!1})},updateCollector(){this.isSubmitting=!0;const{collector:t}=this,{first_name:e,last_name:s}=t;Object(d["g"])(this.collectorId,Object(c["a"])(Object(c["a"])({},t),{},{fullname:`${e} ${s}`})).then(()=>{this.$toast.success("Collector successfully updated"),this.reloadTable()}).catch(t=>{this.$toast.error(t,{duration:1e4})}).finally(()=>{this.isSubmitting=!1})},isTabActive(t){return this.activeTab===t},close(){this.isSubmitting||this.$emit("close")},onClosed(){this.activeTab=""},changeTab(t){this.isSubmitting||(this.activeTab=t)},reloadTable(){this.$bus.emit("reload-collector-table")}}},z=q,G=Object(F["a"])(z,L,B,!1,null,null,null),H=G.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Delete Collector",visible:t.visible,loading:t.isLoading},on:{close:t.onClose,success:t.deleteCollector}},[t._v(" Are you sure you want to delete "+t._s(t.collector.first_name+" "+t.collector.last_name)+"? ")])},R=[],Y={name:"DeleteCollector",components:{Modal:k["a"]},props:{visible:{type:Boolean,default:!1},collector:{type:Object,default:()=>({})}},data(){return{isLoading:!1}},methods:{deleteCollector(){this.isLoading=!0,Object(d["b"])(this.collector.id).then(()=>{this.$bus.emit("reload-collector-table"),this.$toast.success("Successfully Deleted!")}).catch(t=>{t?this.$toast.error(t):this.$toast.error("There was an error while deleting collector!")}).finally(()=>{this.isLoading=!1,this.onClose()})},onClose(){this.isLoading||this.$emit("close")}}},K=Y,Q=Object(F["a"])(K,J,R,!1,null,null,null),V=Q.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:t.title,loading:t.isSubmittingFund,"hide-controls":"",visible:t.visible},on:{closed:t.reset,close:t.close}},[s("div",{staticClass:"modal-form-wrapper pb-3"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.storeFund(e)}}},[s("ForeShadow",{attrs:{visible:t.isSubmittingFund}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"col-12 input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"form-control",staticStyle:{"font-size":"16px"},attrs:{type:"number",placeholder:"Enter Amount",min:"1",step:"0.1",required:"",autofocus:""},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("Button",{attrs:{type:"submit",loading:t.isSubmittingFund,color:"primary"}},[t._v(" Add ")])],1)])])])])],1),s("div",{staticClass:"col-12 mt-3"},[s("h5",{staticClass:"mb-2 text-gray-dark"},[t._v(" Recent Funds ")]),s("FundTable",{attrs:{funds:t.funds,loading:t.isFetchingFunds,update:t.updateFund}})],1)]),s("p",{staticClass:"mb-0 mt-3 text-gray-dark text-right"},[t._v(" * You cannot edit the approved transaction ")])])},X=[],Z=s("d855"),tt=s("ad4f"),et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("CardLoader",{attrs:{"is-loading":t.loading}},[s("SimpleBar",{staticClass:"bg-gray-lighter overflow-auto",staticStyle:{"max-height":"300px"}},[t.funds.length?s("table",{staticClass:"table table-borderless table-vcenter mb-0"},[s("tbody",t._l(t.funds,(function(e){return s("tr",{key:e.id},[s("td",{staticStyle:{width:"50%"}},[t.currentEditing!==e.id?s("span",{staticClass:"pl-2"},[t._v(" "+t._s(t._f("formatCurrency")(e.amount))+" ")]):s("span",[s("form",{on:{submit:function(s){return s.preventDefault(),t.save(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.editAmount,expression:"editAmount"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:"0.1",autofocus:""},domProps:{value:t.editAmount},on:{input:function(e){e.target.composing||(t.editAmount=e.target.value)}}}),s("button",{ref:"editFormButton",refInFor:!0,staticClass:"d-none",attrs:{type:"submit"}})])])]),s("td",{staticClass:"text-center"},[t._v(" "+t._s(e.entry_time)+" ")]),s("td",{staticClass:"text-center"},[t._v(" "+t._s(e.entry_date_np)+" ")]),s("td",{staticStyle:{width:"65px"}},[t.currentEditing!==e.id?s("Button",{attrs:{size:"sm",title:t.isEditable(e)?"Edit Fund":"Cannot Edit",disabled:!t.isEditable(e),color:t.isEditable(e)?"success":"secondary"},on:{click:function(s){return t.edit(e)}}},[s("i",{staticClass:"si si-note"})]):s("Button",{attrs:{loading:t.isUpdating,size:"sm",color:"primary"},on:{click:t.onSave}},[s("i",{staticClass:"fa fa-floppy-o"})])],1)])})),0)]):s("div",{staticClass:"min-height-100 d-flex flex-row justify-content-center align-items-center"},[s("span",{staticClass:"text-gray-dark"},[s("strong",[t._v(" No Recent Funds ")])])])])],1)},st=[],at=s("8d3b"),it={name:"FundTable",components:{CardLoader:g["a"],SimpleBar:at["a"],Button:tt["a"]},props:{funds:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},update:{type:Function,default:()=>{}}},data(){return{currentEditing:null,editAmount:0,isUpdating:!1}},methods:{isEditable(t){return!t.is_approved},edit(t){this.currentEditing=t.id,this.editAmount=t.amount},save(t){if(t.amount!==this.editAmount)return this.isUpdating=!0,void this.update(t.id,this.editAmount).then(()=>{this.currentEditing=null,this.editAmount="",this.isUpdating=!1});this.currentEditing=null,this.editAmount=""},onSave(){const t=this.$refs.editFormButton[0];t.click()}}},ot=it,nt=Object(F["a"])(ot,et,st,!1,null,null,null),lt=nt.exports,rt={name:"AddFund",components:{Modal:k["a"],ForeShadow:Z["a"],Button:tt["a"],FundTable:lt},props:{visible:{type:Boolean,default:!0},collector:{type:Object,default:()=>({})}},data(){return{isFetchingFunds:!1,isFundUpdating:!1,funds:[],isSubmittingFund:!1,amount:null}},computed:{title(){return`Add Fund > ${this.collector.first_name} ${this.collector.last_name}`}},watch:{visible(t){t&&this.fetchFunds()}},methods:{storeFund(){this.isSubmittingFund=!0,Object(d["f"])(this.collector.id,this.amount).then(()=>{this.amount=null,this.fetchFunds(),this.$toast.success("Fund successfully stored.")}).catch(t=>{this.$toast.error(t,{duration:1e4})}).finally(()=>{this.isSubmittingFund=!1})},close(){this.isSubmittingFund||this.$emit("close")},fetchFunds(){this.isFetchingFunds=!0,Object(d["e"])(this.collector.id).then(t=>{this.funds=t.data}).catch(()=>{this.$toast.error("There was an error while fetching fund.")}).finally(()=>{this.isFetchingFunds=!1})},updateFund(t,e){return Object(d["h"])(t,e).then(()=>{const s=Object(u["findIndex"])(this.funds,["id",t]);this.funds[s].amount=e,this.$toast.success("Fund updated successfully")}).catch(t=>{this.$toast.error(t,{duration:1e4})})},reset(){this.isFetchingFunds=!1,this.funds=[],this.isSubmittingFund=!1,this.amount=null}}},ct=rt,ut=Object(F["a"])(ct,W,X,!1,null,null,null),dt=ut.exports,ht={name:"Collectors",components:{CreateCollector:T,CollectorTable:P,ContentHeader:o["a"],DeleteCollector:V,UpdateCollector:H,AddFund:dt},data(){return{isAddCollectorShown:!1,isDeleteModalShown:!1,isEditCollectorShown:!1,isFundModalShown:!1,targetCollector:{}}},methods:{onDeleteCollector(t){this.targetCollector=t,this.isDeleteModalShown=!0},onEditCollector(t){this.targetCollector=t,this.isEditCollectorShown=!0},onFundModalOpen(t){this.targetCollector=t,this.isFundModalShown=!0}}},mt=ht,pt=Object(F["a"])(mt,a,i,!1,null,null,null);e["default"]=pt.exports},"32f3":function(t,e,s){"use strict";var a=s("72ea"),i=s.n(a);i.a},"66cb":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Confirmation",visible:t.visible,loading:t.loading},on:{success:t.onSuccess,close:t.close}},[t._v(" Are you sure you want to "+t._s(t.state)+" "+t._s(t.userName)+"? ")])},i=[],o=s("78b5"),n={name:"UpdateStatus",components:{Modal:o["a"]},props:{visible:{type:Boolean,default:!1},user:{type:Object,default:()=>({})},status:{type:Boolean,default:!1},submission:{type:Function,default:()=>{}}},data(){return{loading:!1}},computed:{state(){return this.status?"activate":"deactivate"},userName(){return`${this.user.first_name} ${this.user.last_name}`}},methods:{onSuccess(){this.loading=!0,this.submission(this.user.id,this.status).then(()=>{this.$toast.success("Status successfully updated"),this.$emit("success"),this.close(!0)}).catch(()=>{this.$toast.error("There was an error while changing status")}).finally(()=>{this.loading=!1})},close(t=!1){this.loading&&!t||this.$emit("close")}}},l=n,r=s("2877"),c=Object(r["a"])(l,a,i,!1,null,null,null);e["a"]=c.exports},"6d04":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.formSubmit(e)}}},[s("ForeShadow",{attrs:{visible:t.isSubmitting}},[s("SimpleBar",{staticClass:"modal-form-wrapper"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-9"},[s("InputText",{attrs:{title:"New Password",type:"password",error:t.error,required:""},on:{input:function(e){t.error=""}},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),s("div",{staticClass:"col-9"},[s("InputText",{attrs:{title:"Confirm Password",error:t.error,type:"password",required:""},on:{input:function(e){t.error=""}},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1)])])],1),s("div",{staticClass:"py-3 d-flex justify-content-start"},[s("Button",{attrs:{type:"submit",loading:t.isSubmitting,color:"primary"}},[t._v(" Update ")])],1)],1)},i=[],o=s("8d3b"),n=s("2612"),l=s("7fb4"),r=s("ad4f"),c=s("d855"),u={name:"SecurityForm",components:{InputText:l["a"],Button:r["a"],ForeShadow:c["a"],SimpleBar:o["a"]},props:{user:{type:Object,default:()=>({})}},data(){return{newPassword:"",confirmPassword:"",error:"",isSubmitting:!1}},methods:{formSubmit(){this.newPassword===this.confirmPassword?(this.isSubmitting=!0,Object(n["h"])({token:this.user.token,new_password:this.newPassword}).then(()=>{this.$toast.success("Password successfully updated.")}).catch(t=>{this.$toast.error(t,{duration:1e4})}).finally(()=>{this.isSubmitting=!1})):this.error="Password didn't match"}}},d=u,h=s("2877"),m=Object(h["a"])(d,a,i,!1,null,null,null);e["a"]=m.exports},"71f7":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("form",{on:{submit:function(e){return e.preventDefault(),t.formSubmit(e)}}},[s("ForeShadow",{attrs:{visible:t.loading}},[s("SimpleBar",{staticClass:"modal-form-wrapper"},[s("div",{staticClass:"row"},t._l(t.inputPhones,(function(e,a){return s("div",{key:a,staticClass:"col-12 phone-wrapper"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"d-flex align-items-center flex-wrap"},[s("div",{staticClass:"flex-grow-1 mr-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone.phone"}],staticClass:"form-control flex-grow-1",class:{"is-primary":e.isPrimary,"is-invalid":e.error},attrs:{placeholder:"Phone",type:"text",required:"",pattern:"\\+?(?:[0-9]{3})?(?:\\s|-)?[0-9]{6,10}"},domProps:{value:e.phone},on:{input:[function(s){s.target.composing||t.$set(e,"phone",s.target.value)},function(e){return t.removeError(a)}]}}),e.error?s("span",{staticClass:"text-danger"},[t._v(" "+t._s(e.error)+" ")]):t._e()]),s("div",{staticClass:"d-flex"},[s("a",{staticClass:"enable-underline mr-3 text-nowrap",class:{"disabled-link":e.isPrimary},attrs:{tabindex:"-1",href:"#"},on:{click:function(e){return e.preventDefault(),t.setAsPrimary(a)}}},[t._v("set as primary ")]),s("a",{staticClass:"enable-underline text-danger",class:{"disabled-link":e.isPrimary},attrs:{tabindex:"-1",href:"#"},on:{click:function(e){return e.preventDefault(),t.removePhone(a)}}},[t._v("remove")])])])])])})),0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("a",{staticClass:"enable-underline",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addNewPhone(e)}}},[t._v(" Add New ")])])])]),s("div",{staticClass:"py-3 d-flex justify-content-start"},[s("Button",{attrs:{type:"submit",loading:t.loading,disabled:t.loading,color:"primary"}},[t._v(" Update ")])],1)],1)],1)])},i=[],o=(s("25f0"),s("8d3b")),n=s("2ef0"),l=s("2612"),r=s("ad4f"),c=s("d855"),u={name:"Phone",components:{Button:r["a"],ForeShadow:c["a"],SimpleBar:o["a"]},props:{userId:{type:Number,default:null},value:{type:Array,default:()=>[]}},data(){return{loading:!1,inputPhones:[]}},watch:{value:{handler(t){this.inputPhones=t.map(t=>({phone:t.phone,isPrimary:!!t.is_primary,error:""}))},immediate:!0}},methods:{addNewPhone(){this.inputPhones.push({phone:"",isPrimary:!1,error:""})},setAsPrimary(t){if(!this.inputPhones[t].phone)return void(this.inputPhones[t].error="Cannot set empty value as primary.");const e=Object(n["findIndex"])(this.inputPhones,"isPrimary");this.inputPhones[e]&&(this.inputPhones[e].isPrimary=!1),this.inputPhones[t].isPrimary=!0},formSubmit(){const t=this.inputPhones.filter(t=>!!t.phone).map(t=>({phone:t.phone.toString(),is_primary:t.isPrimary?1:0}));this.loading=!0,Object(l["l"])(this.userId,{phones:t}).then(()=>{this.$emit("input",t),this.$emit("updated",t),this.$toast.success("Phone successfully updated")}).catch(t=>{this.$toast.error(t,{duration:1e4})}).finally(()=>{this.loading=!1})},removePhone(t){this.inputPhones.splice(t,1)},removeError(t){this.inputPhones[t].error=""}}},d=u,h=(s("32f3"),s("2877")),m=Object(h["a"])(d,a,i,!1,null,"01f75095",null);e["a"]=m.exports},"72ea":function(t,e,s){},"7e22":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{class:{"font-italic text-gray-dark":""===t.status}},[t._v(" "+t._s(t.status||"N/A")+" ")])},i=[],o={name:"LastOnlineColumn",props:{status:{type:String,default:""}}},n=o,l=s("2877"),r=Object(l["a"])(n,a,i,!1,null,null,null);e["a"]=r.exports},"9b38":function(t,e,s){"use strict";var a=s("d8a5"),i=s.n(a);i.a},d8a5:function(t,e,s){},fa43:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"block mb-0"},[s("ul",{staticClass:"nav nav-tabs nav-tabs-alt",attrs:{"data-toggle":"tabs",role:"tablist"}},t._l(t.tabs,(function(e,a){return s("li",{key:a,staticClass:"nav-item"},[s("a",{staticClass:"nav-link text-capitalize",class:{active:t.current===e},attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.$emit("change",e)}}},[t._v(t._s(e))])])})),0),s("div",{staticClass:"tab-content"},[t._t("default")],2)])},i=[],o={props:{current:{type:String,default:""},tabs:{type:Array,default:()=>[]}}},n=o,l=s("2877"),r=Object(l["a"])(n,a,i,!1,null,null,null);e["a"]=r.exports}}]);