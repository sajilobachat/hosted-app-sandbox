(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["customers"],{"007b":function(t,e,s){},"06bc":function(t,e,s){"use strict";var a=s("e064"),i=s.n(a);i.a},"163c":function(t,e,s){"use strict";var a=s("48a5"),i=s.n(a);i.a},"16de":function(t,e,s){},"19b1":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-2 bg-white custom-border-radius"},[s("p",{staticClass:"m-0 text-center"},[t._v(" "+t._s(t.field.name)+" "),t.field.required?s("span",{staticClass:"text-danger"},[t._v("*")]):t._e()]),s("select",{ref:"input",staticClass:"form-control",staticStyle:{width:"140px"},attrs:{name:"sample"},domProps:{value:t.value},on:{input:t.updateInput}},t._l(t.field.options,(function(e){return s("option",{key:t.getOptionValue(e),domProps:{value:t.getOptionValue(e)}},[t._v(" "+t._s(t.getOptionText(e))+" ")])})),0)])},i=[],n={name:"Selectable",props:{field:{type:Object,default:()=>({})},value:{type:[Number,String],default:0}},methods:{getOptionValue(t){const{optionValue:e}=this.field;return e?t[e]:t},getOptionText(t){const{optionText:e}=this.field;return e?t[e]:t},updateInput(){this.$emit("input",this.$refs.input.value),this.$emit("select",this.$refs.input.value)}}},r=n,o=s("2877"),l=Object(o["a"])(r,a,i,!1,null,"779e8940",null);e["a"]=l.exports},"20ea":function(t,e,s){"use strict";var a=s("8e1b"),i=s.n(a);i.a},"27dc":function(t,e,s){},"31e6":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"image-wrapper bg-gray d-flex justify-content-center align-items-center rounded-circle"},[t.url?s("img",{staticClass:"img-fluid rounded-circle",attrs:{src:t.url}}):s("i",{class:t.icon})])},i=[],n={name:"ImageColumn",props:{url:{type:String,default:""},icon:{type:String,default:"si si-user"}}},r=n,o=(s("cad3"),s("2877")),l=Object(o["a"])(r,a,i,!1,null,"1cbdaccf",null);e["a"]=l.exports},"32f3":function(t,e,s){"use strict";var a=s("72ea"),i=s.n(a);i.a},"40eb":function(t){t.exports=JSON.parse('[{"id":"fullname","name":"Full Name","dataType":"string","required":true,"csvField":{}},{"id":"account_type","name":"Account Type","type":"dropdown","options":[{"id":1,"name":"SAVINGS"},{"id":2,"name":"LOAN"}],"optionValue":"id","optionText":"name","selected":1,"required":true},{"id":"account_number","name":"Account Number","dataType":"string","required":true,"csvField":{}},{"id":"category","name":"Category","dataType":"string","required":false,"csvField":{}},{"id":"email","name":"Email","dataType":"string","required":false,"csvField":{}},{"id":"phone","name":"Phone Number","dataType":"string","required":false,"csvField":{}},{"id":"group","name":"Group","type":"dropdown","optionValue":"id","optionText":"name","options":[],"selected":0,"required":false},{"id":"landmark","name":"Landmark (address)","dataType":"string","required":false,"csvField":{}}]')},"48a5":function(t,e,s){},"564f":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("CardLoader",{attrs:{"is-loading":t.isLoading}},[s("div",{style:{height:"200px",width:"400px"}},[s("FileUploader",{attrs:{message:"Drop your csv file here"},on:{upload:t.onFileUpload}})],1)])},i=[],n=s("c2cd"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"file-upload m-auto d-flex justify-content-center",class:{dragging:t.isDragging},on:{dragenter:function(e){t.isDragging=!0},dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),t.onFileDrop(e)},dragleave:function(e){t.isDragging=!1}}},[s("div",{staticClass:"d-flex flex-column justify-content-center align-items-center",class:{"disable-pointer-event":t.isDragging}},[s("i",{staticClass:"si fa-4x si-cloud-download"}),s("span",{staticClass:"mt-2"},[t._v(" "+t._s(t.message)+". Or, ")]),s("button",{staticClass:"btn btn-sm btn-primary btn-noborder mt-2",on:{click:t.openFileExplorer}},[t._v(" Select from your device ")]),s("input",{ref:"inputFile",staticClass:"d-none",attrs:{type:"file"},on:{change:t.onFileSelect}})])])},o=[],l=(s("ddb0"),{name:"FileUploader",props:{message:{type:String,default:"Drop your files here"}},data(){return{isDragging:!1}},methods:{getFiles(t){const e=[];if(t.items.length)for(const s of t.items){const t=s.getAsFile();e.push(t)}else if(t.files.length)for(const s of t.files)e.push(s);return e},openFileExplorer(){this.$refs.inputFile.click()},onUpload(t){this.$emit("upload",t)},onFileDrop(t){this.isDragging=!1;const e=this.getFiles(t.dataTransfer);e.length&&this.onUpload(e)},onFileSelect({target:t}){this.isDragging=!1;const{files:e}=t;e.length&&this.onUpload(e)}}}),u=l,c=(s("163c"),s("2877")),d=Object(c["a"])(u,r,o,!1,null,"0d6b6d40",null),p=d.exports,m=s("ab74"),h={name:"CSVUploader",components:{FileUploader:p,CardLoader:n["a"]},data(){return{isLoading:!1}},methods:{onFileUpload(t){this.isLoading=!0;const e=t[0];Object(m["k"])(e)?Object(m["b"])(e).then(m["c"]).then(Object(m["a"])(500)).then(t=>this.$emit("load",t)).finally(()=>{this.isLoading=!1}):(this.isLoading=!1,this.$toast.error("Invalid file type"))}}},f=h,g=Object(c["a"])(f,a,i,!1,null,null,null);e["a"]=g.exports},"5a93":function(t,e,s){},"66cb":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Confirmation",visible:t.visible,loading:t.loading},on:{success:t.onSuccess,close:t.close}},[t._v(" Are you sure you want to "+t._s(t.state)+" "+t._s(t.userName)+"? ")])},i=[],n=s("78b5"),r={name:"UpdateStatus",components:{Modal:n["a"]},props:{visible:{type:Boolean,default:!1},user:{type:Object,default:()=>({})},status:{type:Boolean,default:!1},submission:{type:Function,default:()=>{}}},data(){return{loading:!1}},computed:{state(){return this.status?"activate":"deactivate"},userName(){return`${this.user.first_name} ${this.user.last_name}`}},methods:{onSuccess(){this.loading=!0,this.submission(this.user.id,this.status).then(()=>{this.$toast.success("Status successfully updated"),this.$emit("success"),this.close(!0)}).catch(()=>{this.$toast.error("There was an error while changing status")}).finally(()=>{this.loading=!1})},close(t=!1){this.loading&&!t||this.$emit("close")}}},o=r,l=s("2877"),u=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=u.exports},"6bad":function(t,e,s){},"6d04":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.formSubmit(e)}}},[s("ForeShadow",{attrs:{visible:t.isSubmitting}},[s("SimpleBar",{staticClass:"modal-form-wrapper"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-9"},[s("InputText",{attrs:{title:"New Password",type:"password",error:t.error,required:""},on:{input:function(e){t.error=""}},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),s("div",{staticClass:"col-9"},[s("InputText",{attrs:{title:"Confirm Password",error:t.error,type:"password",required:""},on:{input:function(e){t.error=""}},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1)])])],1),s("div",{staticClass:"py-3 d-flex justify-content-start"},[s("Button",{attrs:{type:"submit",loading:t.isSubmitting,color:"primary"}},[t._v(" Update ")])],1)],1)},i=[],n=s("8d3b"),r=s("2612"),o=s("7fb4"),l=s("ad4f"),u=s("d855"),c={name:"SecurityForm",components:{InputText:o["a"],Button:l["a"],ForeShadow:u["a"],SimpleBar:n["a"]},props:{user:{type:Object,default:()=>({})}},data(){return{newPassword:"",confirmPassword:"",error:"",isSubmitting:!1}},methods:{formSubmit(){this.newPassword===this.confirmPassword?(this.isSubmitting=!0,Object(r["h"])({token:this.user.token,new_password:this.newPassword}).then(()=>{this.$toast.success("Password successfully updated.")}).catch(t=>{this.$toast.error(t,{duration:1e4})}).finally(()=>{this.isSubmitting=!1})):this.error="Password didn't match"}}},d=c,p=s("2877"),m=Object(p["a"])(d,a,i,!1,null,null,null);e["a"]=m.exports},"6fa3":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-2 bg-white custom-border-radius",attrs:{draggable:"true"},on:{dragstart:t.onDragStart}},[s("p",{staticClass:"m-0 text-center"},[t._v(" "+t._s(t.field.name)+" ")])])},i=[],n=s("ab74"),r={name:"Draggable",props:{field:{type:Object,default:null}},methods:{onDragStart({dataTransfer:t}){t.setData("text",Object(n["j"])(this.field))}}},o=r,l=s("2877"),u=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=u.exports},"71f7":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("form",{on:{submit:function(e){return e.preventDefault(),t.formSubmit(e)}}},[s("ForeShadow",{attrs:{visible:t.loading}},[s("SimpleBar",{staticClass:"modal-form-wrapper"},[s("div",{staticClass:"row"},t._l(t.inputPhones,(function(e,a){return s("div",{key:a,staticClass:"col-12 phone-wrapper"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"d-flex align-items-center flex-wrap"},[s("div",{staticClass:"flex-grow-1 mr-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone.phone"}],staticClass:"form-control flex-grow-1",class:{"is-primary":e.isPrimary,"is-invalid":e.error},attrs:{placeholder:"Phone",type:"text",required:"",pattern:"\\+?(?:[0-9]{3})?(?:\\s|-)?[0-9]{6,10}"},domProps:{value:e.phone},on:{input:[function(s){s.target.composing||t.$set(e,"phone",s.target.value)},function(e){return t.removeError(a)}]}}),e.error?s("span",{staticClass:"text-danger"},[t._v(" "+t._s(e.error)+" ")]):t._e()]),s("div",{staticClass:"d-flex"},[s("a",{staticClass:"enable-underline mr-3 text-nowrap",class:{"disabled-link":e.isPrimary},attrs:{tabindex:"-1",href:"#"},on:{click:function(e){return e.preventDefault(),t.setAsPrimary(a)}}},[t._v("set as primary ")]),s("a",{staticClass:"enable-underline text-danger",class:{"disabled-link":e.isPrimary},attrs:{tabindex:"-1",href:"#"},on:{click:function(e){return e.preventDefault(),t.removePhone(a)}}},[t._v("remove")])])])])])})),0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("a",{staticClass:"enable-underline",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addNewPhone(e)}}},[t._v(" Add New ")])])])]),s("div",{staticClass:"py-3 d-flex justify-content-start"},[s("Button",{attrs:{type:"submit",loading:t.loading,disabled:t.loading,color:"primary"}},[t._v(" Update ")])],1)],1)],1)])},i=[],n=(s("25f0"),s("8d3b")),r=s("2ef0"),o=s("2612"),l=s("ad4f"),u=s("d855"),c={name:"Phone",components:{Button:l["a"],ForeShadow:u["a"],SimpleBar:n["a"]},props:{userId:{type:Number,default:null},value:{type:Array,default:()=>[]}},data(){return{loading:!1,inputPhones:[]}},watch:{value:{handler(t){this.inputPhones=t.map(t=>({phone:t.phone,isPrimary:!!t.is_primary,error:""}))},immediate:!0}},methods:{addNewPhone(){this.inputPhones.push({phone:"",isPrimary:!1,error:""})},setAsPrimary(t){if(!this.inputPhones[t].phone)return void(this.inputPhones[t].error="Cannot set empty value as primary.");const e=Object(r["findIndex"])(this.inputPhones,"isPrimary");this.inputPhones[e]&&(this.inputPhones[e].isPrimary=!1),this.inputPhones[t].isPrimary=!0},formSubmit(){const t=this.inputPhones.filter(t=>!!t.phone).map(t=>({phone:t.phone.toString(),is_primary:t.isPrimary?1:0}));this.loading=!0,Object(o["l"])(this.userId,{phones:t}).then(()=>{this.$emit("input",t),this.$emit("updated",t),this.$toast.success("Phone successfully updated")}).catch(t=>{this.$toast.error(t,{duration:1e4})}).finally(()=>{this.loading=!1})},removePhone(t){this.inputPhones.splice(t,1)},removeError(t){this.inputPhones[t].error=""}}},d=c,p=(s("32f3"),s("2877")),m=Object(p["a"])(d,a,i,!1,null,"01f75095",null);e["a"]=m.exports},"72ea":function(t,e,s){},"73dd":function(t,e,s){"use strict";var a=s("5a93"),i=s.n(a);i.a},"8b9c":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex flex-column"},[s("div",{staticClass:"mt-n3 mb-2 text-right"},[s("span",[t._v("1-"+t._s(t.rows.length)+" shown")])]),s("div",{staticClass:"table-responsive conf-table-wrapper overflow-auto"},[s("table",{staticClass:"table table-vcenter m-0"},[s("thead",{staticClass:"bg-gray-lighter"},[s("tr",t._l(t.fields,(function(e){return s("th",{key:e.id,staticClass:"text-nowrap"},[t._v(" "+t._s(e.name)+" ")])})),0)]),s("tbody",t._l(t.rows,(function(e,a){return s("tr",{key:a},t._l(t.fields,(function(a){return s("td",{key:a.id},["dropdown"===a.type?s("span",[t._v(" "+t._s(t.getDropdownFieldValue(a))+" ")]):s("span",[t._v(" "+t._s(e[a.csvField.name]||"N/A")+" ")])])})),0)})),0)])]),s("div",{staticClass:"p-3 d-flex justify-content-end mb-n3"},[s("Button",{attrs:{loading:t.loading,color:"primary"},on:{click:function(e){return t.$emit("confirm")}}},[t._v(" Import ")]),s("button",{staticClass:"btn btn-danger ml-3 btn-noborder",on:{click:function(e){return t.$emit("cancel")}}},[t._v(" Cancel ")])],1)])},i=[],n=s("2ef0"),r=s("ad4f"),o={name:"DataConfResult",components:{Button:r["a"]},props:{csvData:{type:Object,default:null},fields:{type:Array,default:null},loading:{type:Boolean,default:!1}},computed:{rows(){return Object(n["slice"])(this.csvData.rows,0,15)}},methods:{getDropdownFieldValue(t){const e=Object(n["find"])(t.options,["id",parseInt(t.selected,0)]);return e?e.name:""}}},l=o,u=(s("ebce"),s("2877")),c=Object(u["a"])(l,a,i,!1,null,"6cb84d52",null);e["a"]=c.exports},"8e1b":function(t,e,s){},"9a1a":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{class:t.spanClass,attrs:{title:t.textStatus}},[s("Toggle",{attrs:{color:"success"},on:{change:t.onChange},model:{value:t.inputStatus,callback:function(e){t.inputStatus=e},expression:"inputStatus"}})],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"css-control css-control-sm css-switch",class:t.spanClass},[s("input",{ref:"input",staticClass:"css-control-input",attrs:{type:"checkbox"},domProps:{checked:t.value},on:{input:t.onInput}}),s("span",{staticClass:"css-control-indicator"}),t._v(" "+t._s(t.title)+" ")])},r=[],o={name:"Toggle",props:{title:{type:String,default:""},value:{type:Boolean,default:!0},color:{type:String,default:"primary"}},computed:{spanClass(){return this.color?"css-control-"+this.color:""}},methods:{onInput(){const t=this.$refs.input.checked;this.$emit("input",t),this.$emit("change",t)}}},l=o,u=s("2877"),c=Object(u["a"])(l,n,r,!1,null,null,null),d=c.exports,p={name:"StatusColumn",components:{Toggle:d},props:{status:{type:Number,default:0}},data(){return{inputStatus:!1}},computed:{spanClass(){return this.status?"text-success":"text-danger"},textStatus(){return this.status?"active":"inactive"}},watch:{status:{handler(){this.inputStatus=!!this.status},immediate:!0}},methods:{onChange(t){setTimeout(()=>{this.inputStatus=!t,this.$emit("change",t)})}}},m=p,h=Object(u["a"])(m,a,i,!1,null,null,null);e["a"]=h.exports},"9d4f":function(t,e,s){"use strict";var a=s("007b"),i=s.n(a);i.a},a292:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("InputBase",{attrs:{title:"Username",error:t.error,required:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.id,i=e.isInvalid;return[s("input",{ref:"input",staticClass:"form-control",class:{"is-invalid":i},attrs:{id:a,type:"text",autocomplete:"off",pattern:t.inputPattern,required:""},domProps:{value:t.value},on:{input:t.onInput}}),t.isLoading?s("div",{staticClass:"inp-icon",staticStyle:{width:"18px"}},[s("Loader")],1):t.isValid?s("div",{staticClass:"text-success inp-icon"},[s("i",{staticClass:"fa fa-check"})]):t._e()]}}])})},i=[],n=s("2ef0"),r=s("2612"),o=s("850b"),l=s("9333"),u={name:"InputUsername",components:{InputBase:o["a"],Loader:l["a"]},props:{value:{type:String,default:""}},data(){return{isLoading:!1,isValid:!1,error:""}},computed:{inputPattern(){return this.error?"$^":".*"}},created(){this.checkAvailability=Object(n["debounce"])(this.checkAvailability,500)},methods:{onInput(){this.isLoading=!0;const{value:t}=this.$refs.input;this.$emit("input",t),this.checkAvailability(t)},updateError(t){this.error=t},checkAvailability(t){if(this.isValid=!1,t.length<5)return this.updateError("The username must be at least 5 characters"),void(this.isLoading=!1);Object(r["b"])(t).then(e=>{if(e)return this.updateError(""),void(this.isValid=!0);this.updateError(t+" is already taken")}).catch(t=>{"request-cancel"!==t&&(this.error=t)}).finally(()=>{this.isLoading=!1})}}},c=u,d=(s("e97d"),s("2877")),p=Object(d["a"])(c,a,i,!1,null,null,null);e["a"]=p.exports},aedf:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ContentHeader",[t._v(" Customers "),s("template",{slot:"extra"},[s("button",{staticClass:"btn btn-primary ml-2 btn-noborder",on:{click:function(e){t.isAddCustomerShown=!0}}},[t._v(" Add Customer ")])])],2),s("CustomerTable",{attrs:{"use-customer-app":t.useCustomerApp},on:{delete:t.onDeleteCustomer,edit:t.onEditCustomer}}),s("AddCustomer",{attrs:{visible:t.isAddCustomerShown,"use-customer-app":t.useCustomerApp},on:{close:function(e){t.isAddCustomerShown=!1}}}),s("DeleteCustomer",{attrs:{customer:t.targetCustomer,visible:t.isDeleteCustomerShown},on:{close:function(e){t.isDeleteCustomerShown=!1}}}),s("UpdateCustomer",{attrs:{"customer-id":t.targetCustomer.id,visible:t.isEditCustomerShown,"use-customer-app":t.useCustomerApp},on:{close:function(e){t.isEditCustomerShown=!1}}})],1)},i=[],n=s("5530"),r=s("2f62"),o=s("1a1f"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-4"},[s("UpdateStatus",{attrs:{visible:t.isStatusModalShown,user:t.targetCustomer,status:t.targetCustomer.status,submission:t.updateStatus},on:{success:t.setStatus,close:function(e){t.isStatusModalShown=!1}}}),s("CardBase",{staticClass:"p-4 mb-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4"},[s("InputSelect",{attrs:{title:"Account Type",options:["ALL","SAVINGS","LOAN"]},on:{select:function(e){return t.fetchData()}},model:{value:t.dataFilters.account_type,callback:function(e){t.$set(t.dataFilters,"account_type",e)},expression:"dataFilters.account_type"}})],1),s("div",{staticClass:"col-md-4"},[s("InputSelect",{attrs:{title:"Group","option-value":"id","option-text":"name",options:t.groupFilters},on:{select:function(e){return t.fetchData()}},model:{value:t.dataFilters.group_id,callback:function(e){t.$set(t.dataFilters,"group_id",e)},expression:"dataFilters.group_id"}})],1),s("div",{staticClass:"col-md-4"},[s("InputSelect",{attrs:{title:"Status","option-value":"value","option-text":"name",options:t.statuses},on:{select:function(e){return t.fetchData()}},model:{value:t.dataFilters.status,callback:function(e){t.$set(t.dataFilters,"status",e)},expression:"dataFilters.status"}})],1),s("div",{staticClass:"col-md-12"},[s("Search",{staticClass:"pt-1",attrs:{debounce:500},on:{change:function(e){return t.fetchData()}},model:{value:t.dataFilters.keyword,callback:function(e){t.$set(t.dataFilters,"keyword",e)},expression:"dataFilters.keyword"}})],1)])]),s("CardLoader",{attrs:{"is-loading":t.isLoading}},[s("CardBase",{staticClass:"table-responsive"},[t.customers.length?s("table",{staticClass:"table table-vcenter m-0"},[s("thead",{staticClass:"bg-gray-lighter"},[s("tr",[s("th",{staticClass:"text-center"},[t._v(" # ")]),s("th"),s("th",{staticClass:"max-width:30%"},[t._v(" Full Name ")]),s("th",[t._v("A/C Number")]),s("th",[t._v("A/C Type")]),s("th",[t._v("Category")]),t.useCustomerApp?s("th",[t._v(" Balance ")]):t._e(),s("th",{staticStyle:{"max-width":"20%"}},[t._v(" Group ")]),s("th",{staticClass:"text-center"},[t._v(" Status ")]),s("th",{staticStyle:{width:"100px"}})])]),s("tbody",t._l(t.customers,(function(e,a){return s("tr",{key:e.id},[s("td",{staticClass:"text-center"},[t._v(" "+t._s(a+1)+" ")]),s("td",[s("ImageColumn",{attrs:{url:e.avatar_url}})],1),s("td",{staticClass:"pl-4 ml-4"},[t._v(" "+t._s(e.fullname||e.first_name+" "+e.last_name)+" ")]),s("td",[t._v(t._s(e.account_number))]),s("td",[t._v(t._s(e.account_type))]),s("td",[t._v(t._s(e.category||"â€”"))]),t.useCustomerApp?s("td",{staticClass:"text-success"},[t._v(" "+t._s(t._f("formatCurrency")(e.amounts.total_amount))+" ")]):t._e(),s("td",[t._v(t._s(e.group_name||"N/A"))]),s("td",{staticClass:"text-center"},[s("StatusColumn",{attrs:{status:e.is_active},on:{change:function(s){return t.onStatusUpdate(e,s)}}})],1),s("td",[s("div",{staticClass:"d-flex flex-row justify-content-around"},[s("button",{staticClass:"btn btn-sm btn-success btn-noborder",attrs:{title:"edit"},on:{click:function(s){return t.$emit("edit",e)}}},[s("i",{staticClass:"si si-note"})])])])])})),0)]):s("div",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[s("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" No Data Found ")])])])],1),s("div",{staticClass:"d-flex justify-content-between align-items-center flex-wrap"},[s("div",[t._v(" "+t._s(t.pagination.message)+" ")]),s("div",{staticClass:"d-flex"},[s("InputSelect",{attrs:{options:[5,15,25,50,100]},on:{select:function(e){return t.fetchData()}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),s("Pagination",{attrs:{length:t.pagination.pages,current:t.pagination.current},on:{change:t.changePagination}})],1)])],1)},u=[],c=(s("ddb0"),s("2ef0")),d=s("9671"),p=s("ab74"),m=s("020b"),h=s("0af5"),f=s("0f8e"),g=s("9c4f"),b=s("9a1a"),v=s("c2cd"),C=s("31e6"),y=s("66cb"),_={name:"CustomerTable",components:{Search:g["a"],Pagination:f["a"],CardBase:m["a"],CardLoader:v["a"],ImageColumn:C["a"],InputSelect:h["a"],StatusColumn:b["a"],UpdateStatus:y["a"]},props:{useCustomerApp:{type:Boolean,default:!1}},data(){return{customers:[],isLoading:!1,isStatusModalShown:!1,targetCustomer:{},statuses:[{name:"ALL",value:null},{name:"ACTIVE",value:1},{name:"INACTIVE",value:0}],dataFilters:{account_type:"ALL",status:1,group_id:0,keyword:""},pagination:{pages:1,current:1,perPage:15}}},computed:Object(n["a"])(Object(n["a"])({},Object(r["c"])(["groups"])),{},{groupFilters(){return[{id:0,name:"ALL"},...this.groups]}}),mounted(){this.$bus.on("reload-customer-table",this.fetchData),this.fetchGroups({}),this.fetchData(),this.$bus.on("router-link-clicked",()=>{this.isLoading||this.fetchData()})},beforeDestroy(){this.$bus.removeAllListeners("reload-customer-table")},methods:Object(n["a"])(Object(n["a"])({},Object(r["b"])(["fetchGroups"])),{},{updateStatus:d["h"],setStatus(){const t=this.targetCustomer,e=Object(c["findIndex"])(this.customers,["id",t.id]);this.customers[e].is_active=t.status?1:0},onStatusUpdate(t,e){this.targetCustomer=Object(n["a"])(Object(n["a"])({},t),{},{status:e}),this.isStatusModalShown=!0},fetchData(t=null){const{status:e,account_type:s,keyword:a,group_id:i}=this.dataFilters;this.isLoading=!0;const n=t=>t&&"ALL"!==t.toUpperCase()?t:null;Object(d["e"])({is_active:e||null,group_id:JSON.parse(i)||null,account_type:n(s),keyword:a||null,per_page:this.pagination.perPage,page:t}).then(({data:t,meta:e})=>{this.customers=t,this.pagination=Object(p["f"])(e),this.isLoading=!1}).catch(t=>{"request-cancel"!==t&&(this.$toast.error("There was an error while fetching data."),this.isLoading=!1)})},changePagination(t){this.pagination.current=t,this.fetchData(t)}})},x=_,w=s("2877"),S=Object(w["a"])(x,l,u,!1,null,null,null),I=S.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{visible:t.visible,title:t.title,"hide-controls":""},on:{closed:t.resetState,close:t.onClose}},[s("div",{staticClass:"add-customer-wrapper"},[t.isLayoutActive("INITIAL")?s("div",{staticClass:"d-flex justify-content-center add-option-wrapper pb-3"},[s("button",{staticClass:"btn mr-2 d-flex flex-column align-items-center justify-content-center",on:{click:function(e){return t.setLayout("CUSTOMER-FORM")}}},[s("i",{staticClass:"si fa-4x si-user-follow"}),s("span",{staticClass:"mt-3"},[t._v("Create")])]),s("button",{staticClass:"btn ml-2 d-flex flex-column align-items-center justify-content-center",on:{click:function(e){return t.setLayout("CUSTOMER-IMPORTER")}}},[s("i",{staticClass:"si fa-4x si-docs"}),s("span",{staticClass:"mt-3"},[t._v("Import")])])]):t._e(),t.isLayoutActive("CUSTOMER-FORM")?s("CreateCustomerForm",{attrs:{"use-customer-app":t.useCustomerApp}}):t._e(),t.isLayoutActive("CUSTOMER-IMPORTER")?s("ImportCustomers"):t._e()],1)])},j=[],F=s("78b5"),$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Basic",{staticClass:"fade-in",attrs:{loading:t.isLoading,"use-customer-app":t.useCustomerApp},on:{submit:t.createCustomer},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1)},D=[],k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.onFormSubmit(e)}}},[s("ForeShadow",{attrs:{visible:t.loading}},[s("SimpleBar",{staticClass:"modal-form-wrapper"},[t.editMode?s("EditForm",{attrs:{"use-customer-app":t.useCustomerApp},on:{"uploading-image":t.toggleButtonDisable},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}):s("CreateForm",{attrs:{"use-customer-app":t.useCustomerApp},on:{"uploading-image":t.toggleButtonDisable},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)],1),s("div",{staticClass:"py-3 d-flex justify-content-start"},[s("Button",{attrs:{type:"submit",loading:t.loading,disabled:t.loading||t.disableButton,color:"primary"}},[t._v(" "+t._s(t.editMode?"Update":"Create")+" ")])],1)],1)},A=[],T=s("8d3b"),P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 d-flex justify-content-center"},[s("div",{staticClass:"h-100 my-3",staticStyle:{width:"280px","max-height":"300px","min-height":"300px"}},[s("ImageUpload",{attrs:{url:t.input.avatar_url,loading:t.isUploadingImage},on:{upload:t.onImageUpload,remove:t.removeImage}})],1)]),s("div",{staticClass:"col-md-6 order-md-first"},[s("InputText",{attrs:{title:"Full Name",required:""},on:{input:t.onInput},model:{value:t.input.fullname,callback:function(e){t.$set(t.input,"fullname",e)},expression:"input.fullname"}}),s("InputSelect",{attrs:{title:"Account Type",options:["SAVINGS","LOAN"],required:""},on:{input:t.onInput},model:{value:t.input.account_type,callback:function(e){t.$set(t.input,"account_type",e)},expression:"input.account_type"}}),s("InputText",{attrs:{title:"Account Number",required:""},on:{input:t.onInput},model:{value:t.input.account_number,callback:function(e){t.$set(t.input,"account_number",e)},expression:"input.account_number"}}),s("InputText",{attrs:{title:"Category"},on:{input:t.onInput},model:{value:t.input.category,callback:function(e){t.$set(t.input,"category",e)},expression:"input.category"}})],1),s("div",{staticClass:"col-md-6"},[s("InputText",{attrs:{type:"email",title:"Email"},on:{input:t.onInput},model:{value:t.input.email,callback:function(e){t.$set(t.input,"email",e)},expression:"input.email"}})],1),s("div",{staticClass:"col-md-6"},[s("InputText",{attrs:{title:"Phone"},on:{input:t.onInput},model:{value:t.input.phone,callback:function(e){t.$set(t.input,"phone",e)},expression:"input.phone"}})],1),t.useCustomerApp?s("div",{staticClass:"col-md-6"},[s("InputUsername",{model:{value:t.input.username,callback:function(e){t.$set(t.input,"username",e)},expression:"input.username"}})],1):t._e(),t.useCustomerApp?s("div",{staticClass:"col-md-6"},[s("InputText",{attrs:{title:"Password",type:"password",required:""},on:{input:t.onInput},model:{value:t.input.password,callback:function(e){t.$set(t.input,"password",e)},expression:"input.password"}})],1):t._e(),s("div",{staticClass:"col-md-6"},[s("InputText",{attrs:{title:"Landmark"},on:{input:t.onInput},model:{value:t.input.landmark,callback:function(e){t.$set(t.input,"landmark",e)},expression:"input.landmark"}})],1),s("div",{staticClass:"col-md-6"},[s("InputSelect",{attrs:{title:"Group","option-value":"id","option-text":"name",options:t.groupList},on:{input:t.onInput},model:{value:t.input.group_id,callback:function(e){t.$set(t.input,"group_id",e)},expression:"input.group_id"}})],1)])])])},L=[],E=s("2612"),U=s("7fb4"),B=s("a292"),N=s("f67a"),q={name:"CreateForm",components:{InputText:U["a"],InputSelect:h["a"],InputUsername:B["a"],ImageUpload:N["a"]},props:{value:{type:Object,default:()=>({})},useCustomerApp:{type:Boolean,default:!1}},data(){return{isUploadingImage:!1,input:{group_id:0,account_type:"SAVINGS"}}},computed:Object(n["a"])(Object(n["a"])({},Object(r["c"])(["groups"])),{},{groupList(){return[{id:0,name:"None"},...this.groups]}}),watch:{value:{handler(t){this.input=Object(n["a"])({avatar_url:"",account_type:"SAVINGS"},t)},immediate:!0}},methods:{onInput(){this.$emit("input",this.input)},onImageUpload(t){this.isUploadingImage=!0,this.$emit("uploading-image",!0);const e=new FormData;e.append("file",t),Object(E["p"])(e).then(({filename:t,url:e})=>{this.input.avatar=t,this.input.avatar_url=e,this.onInput()}).catch(()=>{this.$toast.error("There was an error whilst uploading image.")}).finally(()=>{setTimeout(()=>{this.isUploadingImage=!1,this.$emit("uploading-image",!1)},100)})},removeImage(){this.input.avatar_url="",this.input.avatar=null,this.onInput()}}},R=q,M=Object(w["a"])(R,P,L,!1,null,null,null),V=M.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 col-12 d-flex justify-content-center"},[s("div",{staticClass:"h-100 my-3",staticStyle:{width:"280px","min-height":"300px","max-height":"300px"}},[s("ImageUpload",{attrs:{url:t.input.avatar_url,loading:t.isUploadingImage},on:{upload:t.onImageUpload,remove:t.removeImage}})],1)]),s("div",{staticClass:"col-md-6 order-md-first"},[s("InputText",{attrs:{title:"Name",required:""},on:{input:t.onInput},model:{value:t.input.fullname,callback:function(e){t.$set(t.input,"fullname",e)},expression:"input.fullname"}}),s("InputText",{attrs:{title:"Account Number",required:""},on:{input:t.onInput},model:{value:t.input.account_number,callback:function(e){t.$set(t.input,"account_number",e)},expression:"input.account_number"}}),s("InputText",{attrs:{title:"Category"},on:{input:t.onInput},model:{value:t.input.category,callback:function(e){t.$set(t.input,"category",e)},expression:"input.category"}}),t.useCustomerApp?s("InputUsername",{model:{value:t.input.username,callback:function(e){t.$set(t.input,"username",e)},expression:"input.username"}}):t._e(),s("InputText",{attrs:{type:"email",title:"Email"},on:{input:t.onInput},model:{value:t.input.email,callback:function(e){t.$set(t.input,"email",e)},expression:"input.email"}})],1),s("div",{staticClass:"col-md-6"},[s("InputText",{attrs:{title:"Landmark"},on:{input:t.onInput},model:{value:t.input.landmark,callback:function(e){t.$set(t.input,"landmark",e)},expression:"input.landmark"}})],1),s("div",{staticClass:"col-md-6"},[s("InputSelect",{attrs:{title:"Group","option-value":"id","option-text":"name",options:t.groupList},on:{input:t.onInput},model:{value:t.input.group_id,callback:function(e){t.$set(t.input,"group_id",e)},expression:"input.group_id"}})],1)])]),s("div",{staticClass:"col-12 order-md-last"},[s("InputTextArea",{attrs:{title:"Description",rows:2},on:{input:t.onInput},model:{value:t.input.description,callback:function(e){t.$set(t.input,"description",e)},expression:"input.description"}})],1)])},z=[],J=s("c6b1"),H={name:"EditForm",components:{InputTextArea:J["a"],InputText:U["a"],InputSelect:h["a"],ImageUpload:N["a"],InputUsername:B["a"]},props:{value:{type:Object,default:()=>({})},useCustomerApp:{type:Boolean,default:!1}},data(){return{imgUrl:"",isUploadingImage:!1,input:{group_id:0}}},computed:Object(n["a"])(Object(n["a"])({},Object(r["c"])(["groups"])),{},{groupList(){return[{id:0,name:"None"},...this.groups]}}),watch:{value:{handler(t){this.input=t},immediate:!0}},methods:{onInput(){this.$emit("input",this.input)},onImageUpload(t){this.isUploadingImage=!0,this.$emit("uploading-image",!0);const e=new FormData;e.append("file",t),Object(E["p"])(e).then(({filename:t,url:e})=>{this.input.avatar=t,this.input.avatar_url=e,this.onInput(),this.imgUrl=e}).catch(()=>{this.$toast.error("There was an error whilst uploading image.")}).finally(()=>{this.isUploadingImage=!1,this.$emit("uploading-image",!1)})},removeImage(){this.input.avatar_url="",this.input.avatar=null,this.onInput()}}},K=H,Q=Object(w["a"])(K,G,z,!1,null,null,null),W=Q.exports,X=s("ad4f"),Y=s("d855"),Z={name:"Basic",components:{Button:X["a"],CreateForm:V,EditForm:W,ForeShadow:Y["a"],SimpleBar:T["a"]},props:{value:{type:Object,default:()=>{}},loading:{type:Boolean,default:!1},editMode:{type:Boolean,default:!1},useCustomerApp:{type:Boolean,default:!1}},data(){return{input:{},disableButton:!1}},watch:{value:{handler(t){this.input=Object(n["a"])({},t)},immediate:!0}},methods:{onFormSubmit(){this.$emit("input",this.input),this.$emit("submit",this.input)},toggleButtonDisable(t){this.disableButton=t}}},tt=Z,et=Object(w["a"])(tt,k,A,!1,null,null,null),st=et.exports,at={name:"CreateCustomerForm",components:{Basic:st},props:{useCustomerApp:{type:Boolean,default:!1}},data(){return{isLoading:!1,customer:{group_id:0}}},methods:{createCustomer(){this.isLoading=!0,Object(d["b"])(Object(n["a"])(Object(n["a"])({},this.customer),{},{group_id:parseInt(this.customer.group_id,0)||null})).then(()=>{this.$bus.emit("reload-customer-table"),this.$bus.emit("customer-modal-close"),this.$toast.success("Customer Successfully Created!")}).catch(t=>{this.$toast.error(t,{duration:1e4})}).finally(()=>{this.isLoading=!1})}}},it=at,nt=Object(w["a"])(it,$,D,!1,null,null,null),rt=nt.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pb-3"},[t.csvData?s("DataConfigure",{attrs:{loading:t.isSubmitting,"csv-data":t.csvData},on:{"data-configure":t.submitData}}):s("CSVUploader",{on:{load:t.setCsvData}})],1)},lt=[],ut=s("564f"),ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{on:{dragover:function(t){t.preventDefault()}}},[t.isResultShown?s("DataConfResult",{attrs:{"csv-data":t.csvData,fields:t.customerFields,loading:t.loading},on:{confirm:t.confirmDataConfig,cancel:function(e){t.isResultShown=!1}}}):s("div",{staticClass:"row data-conf-wrapper mt-n3"},[s("div",{staticClass:"col-4 d-flex flex-column"},[s("p",{staticClass:"m-0 mb-1"},[t._v(" CSV Fields ")]),s("div",{staticClass:"bg-gray-light px-3 pb-3 flex-grow-1 overflow-auto apply-max-height",on:{dragover:function(t){t.preventDefault()},drop:t.onResetDrop}},t._l(t.csvFieldContainer,(function(t){return s("Draggable",{key:t.id,staticClass:"mt-3",attrs:{field:t}})})),1)]),s("div",{staticClass:"col-8"},[s("p",{staticClass:"m-0 mb-1"},[t._v(" Customer Fields ")]),s("div",{staticClass:"bg-gray-light px-3 pb-3 d-flex justify-content-around flex-wrap overflow-auto apply-max-height"},[t._l(t.customerFields,(function(e){return["dropdown"===e.type?s("Selectable",{key:e.id,staticClass:"mt-3",attrs:{field:e},model:{value:e.selected,callback:function(s){t.$set(e,"selected",s)},expression:"field.selected"}}):s("Dropable",{key:e.id,staticClass:"mt-3",class:{"w-100":"100"===e.width},attrs:{field:e,"csv-field":e.csvField},on:{select:t.selectCsvField}})]}))],2)]),t.isErrorShown?s("span",{staticClass:"col-12 text-danger text-right mt-1 mb-n2"},[t._v(" All required fields(*) must be selected ")]):t._e(),s("div",{staticClass:"col-12 p-3 d-flex justify-content-end mb-n4"},[s("button",{staticClass:"btn btn-primary btn-noborder",on:{click:t.showResult}},[t._v(" Confirm ")])])])],1)},dt=[],pt=(s("25f0"),s("40eb")),mt=s("f3f5"),ht=s("6fa3"),ft=s("19b1"),gt=s("8b9c"),bt={name:"DataConfigure",components:{DataConfResult:gt["a"],Draggable:ht["a"],Dropable:mt["a"],Selectable:ft["a"]},props:{csvData:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},data(){return{isErrorShown:!1,customerFields:[],csvFieldContainer:[],isResultShown:!1}},computed:Object(n["a"])({},Object(r["c"])(["groups"])),created(){this.customerFields=[...pt].map(t=>Object(n["a"])(Object(n["a"])({},t),{},{csvField:{}}));const t=Object(c["findIndex"])(pt,["id","group"]);this.customerFields[t].options=[{id:0,name:"None"},...this.groups],this.csvFieldContainer=this.csvData.columns.map(t=>({id:Object(c["kebabCase"])(t),name:t,isSelected:!1,customerFieldId:null}))},methods:{selectCsvField(t,e){this.isErrorShown=!1;const s=Object(c["findIndex"])(this.customerFields,["id",t]),a=this.customerFields[s];if(null!=a.csvField.id&&this.removeFromSelected(t,!0),e.isSelected)return this.removeFromSelected(e.customerFieldId),void Object.assign(this.customerFields[s],{csvField:Object(n["a"])(Object(n["a"])({},e),{},{customerFieldId:t})});Object.assign(this.customerFields[s],{csvField:Object(n["a"])(Object(n["a"])({},e),{},{customerFieldId:t,isSelected:!0})});const i=Object(c["findIndex"])(this.csvFieldContainer,["id",e.id]);this.csvFieldContainer.splice(i,1)},removeFromSelected(t,e=!1){const s=Object(c["findIndex"])(this.customerFields,["id",t]);e&&this.csvFieldContainer.push(Object(n["a"])(Object(n["a"])({},this.customerFields[s].csvField),{},{isSelected:!1,customerFieldId:null})),Object.assign(this.customerFields[s].csvField,{name:null,id:null,isSelected:null,customerFieldId:!1})},onResetDrop({dataTransfer:t}){const e=Object(p["i"])(t.getData("text/plain"));return!!(e&&void 0!==e.id&&e.name&&e.isSelected)&&this.removeFromSelected(e.customerFieldId,!0)},validate(){for(const t of this.customerFields){const e=!t.csvField,s=!!t.csvField.id;if(t.required&&"dropdown"!==t.type&&(e||!s))return!1}return!0},showResult(){this.validate()?this.isResultShown=!0:this.isErrorShown=!0},parse(t,e){return t?"string"===e?t.toString():"int"===e?parseInt(t,0):t:null},confirmDataConfig(){let t=null;const e=this.customerFields.filter(e=>"dropdown"!==e.type||"group"!==e.id||(t=e.selected||null,!1));let s="";this.customerFields.filter(t=>{if("account_type"===t.id){const e=Object(c["find"])(t.options,e=>Number(e.id)===Number(t.selected));return s=e?e.name:"",!1}return!0});const a=this.csvData.rows.map(t=>{const a={};return e.forEach(e=>{a[e.id]=this.parse(t[e.csvField.name],e.dataType),a.account_type=s}),a});this.$emit("data-configure",{group_id:t,customers:a})}}},vt=bt,Ct=(s("20ea"),Object(w["a"])(vt,ct,dt,!1,null,"0cb3c47e",null)),yt=Ct.exports,_t={name:"ImportCustomers",components:{DataConfigure:yt,CSVUploader:ut["a"]},data(){return{csvData:null,isSubmitting:!1}},methods:{setCsvData(t){this.csvData=t},submitData(t){this.isSubmitting=!0,Object(d["a"])(t).then(()=>{this.$toast.success("Customers successfully imported"),this.$bus.emit("reload-customer-table"),this.$bus.emit("customer-modal-close")}).catch(t=>{this.$toast.error(t,{duration:1e4})}).finally(()=>{this.isSubmitting=!1})}}},xt=_t,wt=(s("73dd"),Object(w["a"])(xt,ot,lt,!1,null,"071feecf",null)),St=wt.exports,It={name:"AddCustomer",components:{ImportCustomers:St,CreateCustomerForm:rt,Modal:F["a"]},props:{visible:{type:Boolean,default:!1},useCustomerApp:{type:Boolean,default:!1}},data(){return{currentLayout:"CUSTOMER-IMPORTER",title:"Add customer"}},created(){this.$bus.on("customer-modal-change-title",this.setTitle),this.$bus.on("customer-modal-close",this.onClose),this.fetchGroups()},beforeDestroy(){this.$bus.removeAllListeners("customer-modal-change-title"),this.$bus.removeAllListeners("customer-modal-close")},methods:Object(n["a"])(Object(n["a"])({},Object(r["b"])(["fetchGroups"])),{},{isLayoutActive(t){return this.currentLayout===t},setTitle(t){this.title=t},setLayout(t){switch(this.currentLayout=t,t){case"CUSTOMER-FORM":this.title="Create Customer";break;case"CUSTOMER-IMPORTER":this.title="Import Customer";break;default:this.title="Add Customer"}},resetState(){this.currentLayout="INITIAL",this.title="Add customer"},onClose(){this.$emit("close")}})},Ot=It,jt=(s("eb46"),Object(w["a"])(Ot,O,j,!1,null,"48220b46",null)),Ft=jt.exports,$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Edit Customer",visible:t.visible,"hide-controls":""},on:{close:t.close,closed:t.onClosed}},[s("CardLoader",{attrs:{"is-loading":t.isFetchingData}},[s("Tabs",{staticClass:"mt-n4",attrs:{current:t.activeTab,tabs:t.tabs},on:{change:t.changeTab}},[s("div",{staticClass:"pt-4"},[t.isTabActive("General")?s("Basic",{staticClass:"fade-in",attrs:{loading:t.isSubmitting,"edit-mode":"","use-customer-app":t.useCustomerApp},on:{submit:t.updateCustomer},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}}):t.isTabActive("Phone")?s("Phone",{staticClass:"fade-in",attrs:{"user-id":t.customer.user_id},model:{value:t.customer.phones,callback:function(e){t.$set(t.customer,"phones",e)},expression:"customer.phones"}}):t.isTabActive("Security")&&t.useCustomerApp?s("Security",{staticClass:"fade-in",attrs:{user:{id:t.customer.user_id,token:t.customer.token}}}):t._e()],1)])],1)],1)},Dt=[],kt=s("fa43"),At=s("71f7"),Tt=s("6d04"),Pt=s("a1be"),Lt={name:"UpdateCustomer",components:{Modal:F["a"],Tabs:kt["a"],Basic:st,Phone:At["a"],Security:Tt["a"],CardLoader:v["a"]},props:{visible:{type:Boolean,default:!1},customerId:{type:Number,default:null},useCustomerApp:{type:Boolean,default:!1}},data(){return{activeTab:"",isFetchingData:!1,isSubmitting:!1,customer:{}}},computed:{tabs(){const t=["General","Phone","Security"],{useCustomerApp:e}=this;return e?t:t.filter(t=>"Security"!==t)}},watch:{visible(t){t&&(this.fetchData(),this.fetchGroups())}},methods:Object(n["a"])(Object(n["a"])({},Object(r["b"])(["fetchGroups"])),{},{fetchData(){this.isFetchingData=!0,Object(d["d"])(this.customerId).then(t=>{this.customer=Object(Pt["a"])(t,this.useCustomerApp),this.activeTab="General"}).catch(()=>{this.close(),this.$toast.error("There was an error while fetching customer data!")}).finally(()=>{this.isFetchingData=!1})},updateCustomer(t){this.isSubmitting=!0,Object(d["g"])(this.customerId,Object(n["a"])(Object(n["a"])({},t),{},{group_id:parseInt(t.group_id,0)||null})).then(()=>{this.$toast.success("Customer successfully updated"),this.$bus.emit("reload-customer-table")}).catch(t=>{this.$toast.error(t,{duration:1e4})}).finally(()=>{this.isSubmitting=!1})},close(){this.isSubmitting||this.$emit("close")},onClosed(){this.activeTab=""},isTabActive(t){return this.activeTab===t},changeTab(t){this.isSubmitting||(this.activeTab=t)}})},Et=Lt,Ut=Object(w["a"])(Et,$t,Dt,!1,null,null,null),Bt=Ut.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Delete Customer",visible:t.visible,loading:t.isLoading},on:{close:t.onClose,success:t.deleteCustomer}},[t._v(" Are you sure you want to delete "+t._s(t.customer.first_name+" "+t.customer.last_name)+"? ")])},qt=[],Rt={name:"DeleteCustomer",components:{Modal:F["a"]},props:{visible:{type:Boolean,default:!1},customer:{type:Object,default:()=>({})}},data(){return{isLoading:!1}},methods:{deleteCustomer(){this.isLoading=!0,Object(d["c"])(this.customer.id).then(()=>{this.$toast.success("Successfully Deleted!"),this.$bus.emit("reload-customer-table")}).catch(t=>{t?this.$toast.error(t):this.$toast.error("There was an error while deleting customer!")}).finally(()=>{this.isLoading=!1,this.onClose()})},onClose(){this.isLoading||this.$emit("close")}}},Mt=Rt,Vt=Object(w["a"])(Mt,Nt,qt,!1,null,null,null),Gt=Vt.exports,zt={name:"Customers",components:{AddCustomer:Ft,CustomerTable:I,ContentHeader:o["a"],DeleteCustomer:Gt,UpdateCustomer:Bt},data(){return{isAddCustomerShown:!1,isDeleteCustomerShown:!1,isEditCustomerShown:!1,targetCustomer:{}}},computed:Object(n["a"])(Object(n["a"])({},Object(r["c"])(["organization"])),{},{useCustomerApp(){return!!this.organization.use_customer_app||!1}}),methods:{onDeleteCustomer(t){this.targetCustomer=t,this.isDeleteCustomerShown=!0},onEditCustomer(t){this.targetCustomer=t,this.isEditCustomerShown=!0}}},Jt=zt,Ht=Object(w["a"])(Jt,a,i,!1,null,null,null);e["default"]=Ht.exports},c6b1:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("InputBase",{attrs:{title:t.title,required:t.required,error:t.error},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.id,i=e.isInvalid;return[s("textarea",{ref:"input",staticClass:"form-control",class:{"is-invalid":i},attrs:{id:a,cols:t.cols,rows:t.rows,required:t.required,placeholder:t.placeholder},domProps:{value:t.value},on:{change:t.onChange,input:t.updateInput}})]}}])})},i=[],n=s("850b"),r={name:"InputTextArea",components:{InputBase:n["a"]},props:{title:{type:String,default:""},cols:{type:[String,Number],default:30},rows:{type:[String,Number],default:10},onChange:{type:Function,default:()=>[]},value:{type:String,default:""},required:{type:Boolean,default:!1},placeholder:{type:String,default:""},error:{type:String,default:""}},methods:{updateInput(){this.$emit("input",this.$refs.input.value)}}},o=r,l=s("2877"),u=Object(l["a"])(o,a,i,!1,null,"7e79a4cc",null);e["a"]=u.exports},cad3:function(t,e,s){"use strict";var a=s("6bad"),i=s.n(a);i.a},e064:function(t,e,s){},e0c2:function(t,e,s){},e97d:function(t,e,s){"use strict";var a=s("16de"),i=s.n(a);i.a},eb46:function(t,e,s){"use strict";var a=s("27dc"),i=s.n(a);i.a},ebce:function(t,e,s){"use strict";var a=s("e0c2"),i=s.n(a);i.a},f3f5:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-2 bg-white custom-border-radius",class:{"drag-over":t.isDragging},on:{dragenter:function(e){t.isDragging=!0},dragleave:function(e){t.isDragging=!1},dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),t.onDrop(e)}}},[s("div",{staticClass:"w-100 d-flex flex-column align-items-center",class:{"disable-pointer-event":t.isDragging}},[s("p",{staticClass:"m-0 text-center"},[t._v(" "+t._s(t.field.name)+" "),t.field.required?s("span",{staticClass:"text-danger"},[t._v("*")]):t._e()]),s("div",{staticClass:"drop-box bg-gray-light d-flex p-1",class:{"w-100":"100"===t.field.width}},[null!=t.csvField.id?s("Draggable",{staticClass:"flex-grow-1",attrs:{field:t.csvField}}):t._e()],1)])])},i=[],n=s("ab74"),r=s("6fa3"),o={name:"Dropable",components:{Draggable:r["a"]},props:{field:{type:Object,default:null},csvField:{type:Object,default:null}},data(){return{isDragging:!1}},methods:{onDrop({dataTransfer:t}){this.isDragging=!1;const e=Object(n["i"])(t.getData("text/plain"));e&&void 0!==e.id&&e.name&&e.id!==this.csvField.id&&this.$emit("select",this.field.id,e)}}},l=o,u=(s("9d4f"),s("2877")),c=Object(u["a"])(l,a,i,!1,null,"d569bc86",null);e["a"]=c.exports},f67a:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"upload-wrapper h-100"},[s("div",{staticClass:"h-100 d-flex flex-column"},[t.loading?s("div",{staticClass:"h-100 w-100 d-flex justify-content-center align-items-center"},[s("div",{staticStyle:{width:"30px"}},[s("Loader")],1)]):[t.url?s("div",{staticClass:"d-flex image-wrapper justify-content-center align-items-center flex-grow-1"},[s("img",{staticClass:"d-flex img-fluid",attrs:{src:t.url}})]):s("div",{staticClass:"placeholder d-flex justify-content-center align-items-center flex-grow-1",on:{click:t.openFileExplorer}},[s("i",{staticClass:"fa-4x",class:t.icon})])],s("div",{staticClass:"d-flex pt-2 bg-white"},[s("button",{staticClass:"btn btn-sm btn-success btn-noborder mr-1 flex-grow-1",attrs:{type:"button",disabled:t.loading},on:{click:function(e){return e.preventDefault(),t.openFileExplorer(e)}}},[t._v(" Upload ")]),s("button",{staticClass:"btn btn-sm btn-danger btn-noborder ml-1 flex-grow-1",attrs:{type:"button",disabled:t.loading},on:{click:function(e){return e.preventDefault(),t.$emit("remove")}}},[t._v(" Remove ")])])],2),s("input",{ref:"inpFile",staticClass:"d-none",attrs:{type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif"},on:{change:t.uploadImage}})])},i=[],n=s("9333"),r={name:"ImageUpload",components:{Loader:n["a"]},props:{url:{type:String,default:""},icon:{type:String,default:"si si-user"},loading:{type:Boolean,default:!1}},methods:{openFileExplorer(){this.$refs.inpFile.click()},uploadImage({target:t}){if(!t.files.length)return;const e=t.files[0],s=1e-6*e.size;s>10?this.$toast.error("Image size must be lower than 10mb."):this.$emit("upload",e)}}},o=r,l=(s("06bc"),s("2877")),u=Object(l["a"])(o,a,i,!1,null,"47cb7866",null);e["a"]=u.exports},fa43:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"block mb-0"},[s("ul",{staticClass:"nav nav-tabs nav-tabs-alt",attrs:{"data-toggle":"tabs",role:"tablist"}},t._l(t.tabs,(function(e,a){return s("li",{key:a,staticClass:"nav-item"},[s("a",{staticClass:"nav-link text-capitalize",class:{active:t.current===e},attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.$emit("change",e)}}},[t._v(t._s(e))])])})),0),s("div",{staticClass:"tab-content"},[t._t("default")],2)])},i=[],n={props:{current:{type:String,default:""},tabs:{type:Array,default:()=>[]}}},r=n,o=s("2877"),l=Object(o["a"])(r,a,i,!1,null,null,null);e["a"]=l.exports}}]);